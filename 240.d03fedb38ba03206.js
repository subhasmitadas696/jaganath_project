(self.webpackChunksjrtproj=self.webpackChunksjrtproj||[]).push([[240],{2402:function(Ut){Ut.exports=function(){"use strict";function wt(_,m,R,Y,D){!function T(K,ht,M,O,p){for(;O>M;){if(O-M>600){var y=O-M+1,tt=ht-M+1,z=Math.log(y),X=.5*Math.exp(2*z/3),P=.5*Math.sqrt(z*X*(y-X)/y)*(tt-y/2<0?-1:1);T(K,ht,Math.max(M,Math.floor(ht-tt*X/y+P)),Math.min(O,Math.floor(ht+(y-tt)*X/y+P)),p)}var J=K[ht],lt=M,nt=O;for(E(K,M,ht),p(K[O],J)>0&&E(K,M,O);lt<nt;){for(E(K,lt,nt),lt++,nt--;p(K[lt],J)<0;)lt++;for(;p(K[nt],J)>0;)nt--}0===p(K[M],J)?E(K,M,nt):E(K,++nt,O),nt<=ht&&(M=nt+1),ht<=nt&&(O=nt-1)}}(_,m,R||0,Y||_.length-1,D||gt)}function E(_,m,R){var Y=_[m];_[m]=_[R],_[R]=Y}function gt(_,m){return _<m?-1:_>m?1:0}var st=function(_){void 0===_&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function rt(_,m,R){if(!R)return m.indexOf(_);for(var Y=0;Y<m.length;Y++)if(R(_,m[Y]))return Y;return-1}function at(_,m){et(_,0,_.children.length,m,_)}function et(_,m,R,Y,D){D||(D=k(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var T=m;T<R;T++){var K=_.children[T];it(D,_.leaf?Y(K):K)}return D}function it(_,m){return _.minX=Math.min(_.minX,m.minX),_.minY=Math.min(_.minY,m.minY),_.maxX=Math.max(_.maxX,m.maxX),_.maxY=Math.max(_.maxY,m.maxY),_}function xt(_,m){return _.minX-m.minX}function V(_,m){return _.minY-m.minY}function q(_){return(_.maxX-_.minX)*(_.maxY-_.minY)}function Q(_){return _.maxX-_.minX+(_.maxY-_.minY)}function U(_,m){return _.minX<=m.minX&&_.minY<=m.minY&&m.maxX<=_.maxX&&m.maxY<=_.maxY}function Z(_,m){return m.minX<=_.maxX&&m.minY<=_.maxY&&m.maxX>=_.minX&&m.maxY>=_.minY}function k(_){return{children:_,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function I(_,m,R,Y,D){for(var T=[m,R];T.length;)if(!((R=T.pop())-(m=T.pop())<=Y)){var K=m+Math.ceil((R-m)/Y/2)*Y;wt(_,K,m,R,D),T.push(m,K,K,R)}}return st.prototype.all=function(){return this._all(this.data,[])},st.prototype.search=function(_){var m=this.data,R=[];if(!Z(_,m))return R;for(var Y=this.toBBox,D=[];m;){for(var T=0;T<m.children.length;T++){var K=m.children[T],ht=m.leaf?Y(K):K;Z(_,ht)&&(m.leaf?R.push(K):U(_,ht)?this._all(K,R):D.push(K))}m=D.pop()}return R},st.prototype.collides=function(_){var m=this.data;if(!Z(_,m))return!1;for(var R=[];m;){for(var Y=0;Y<m.children.length;Y++){var D=m.children[Y],T=m.leaf?this.toBBox(D):D;if(Z(_,T)){if(m.leaf||U(_,T))return!0;R.push(D)}}m=R.pop()}return!1},st.prototype.load=function(_){if(!_||!_.length)return this;if(_.length<this._minEntries){for(var m=0;m<_.length;m++)this.insert(_[m]);return this}var R=this._build(_.slice(),0,_.length-1,0);if(this.data.children.length)if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var Y=this.data;this.data=R,R=Y}this._insert(R,this.data.height-R.height-1,!0)}else this.data=R;return this},st.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},st.prototype.clear=function(){return this.data=k([]),this},st.prototype.remove=function(_,m){if(!_)return this;for(var R,Y,D,T=this.data,K=this.toBBox(_),ht=[],M=[];T||ht.length;){if(T||(T=ht.pop(),Y=ht[ht.length-1],R=M.pop(),D=!0),T.leaf){var O=rt(_,T.children,m);if(-1!==O)return T.children.splice(O,1),ht.push(T),this._condense(ht),this}D||T.leaf||!U(T,K)?Y?(R++,T=Y.children[R],D=!1):T=null:(ht.push(T),M.push(R),R=0,Y=T,T=T.children[0])}return this},st.prototype.toBBox=function(_){return _},st.prototype.compareMinX=function(_,m){return _.minX-m.minX},st.prototype.compareMinY=function(_,m){return _.minY-m.minY},st.prototype.toJSON=function(){return this.data},st.prototype.fromJSON=function(_){return this.data=_,this},st.prototype._all=function(_,m){for(var R=[];_;)_.leaf?m.push.apply(m,_.children):R.push.apply(R,_.children),_=R.pop();return m},st.prototype._build=function(_,m,R,Y){var D,T=R-m+1,K=this._maxEntries;if(T<=K)return at(D=k(_.slice(m,R+1)),this.toBBox),D;Y||(Y=Math.ceil(Math.log(T)/Math.log(K)),K=Math.ceil(T/Math.pow(K,Y-1))),(D=k([])).leaf=!1,D.height=Y;var ht=Math.ceil(T/K),M=ht*Math.ceil(Math.sqrt(K));I(_,m,R,M,this.compareMinX);for(var O=m;O<=R;O+=M){var p=Math.min(O+M-1,R);I(_,O,p,ht,this.compareMinY);for(var y=O;y<=p;y+=ht){var tt=Math.min(y+ht-1,p);D.children.push(this._build(_,y,tt,Y-1))}}return at(D,this.toBBox),D},st.prototype._chooseSubtree=function(_,m,R,Y){for(;Y.push(m),!m.leaf&&Y.length-1!==R;){for(var D=1/0,T=1/0,K=void 0,ht=0;ht<m.children.length;ht++){var M=m.children[ht],O=q(M),p=(y=_,tt=M,(Math.max(tt.maxX,y.maxX)-Math.min(tt.minX,y.minX))*(Math.max(tt.maxY,y.maxY)-Math.min(tt.minY,y.minY))-O);p<T?(T=p,D=O<D?O:D,K=M):p===T&&O<D&&(D=O,K=M)}m=K||m.children[0]}var y,tt;return m},st.prototype._insert=function(_,m,R){var Y=R?_:this.toBBox(_),D=[],T=this._chooseSubtree(Y,this.data,m,D);for(T.children.push(_),it(T,Y);m>=0&&D[m].children.length>this._maxEntries;)this._split(D,m),m--;this._adjustParentBBoxes(Y,D,m)},st.prototype._split=function(_,m){var R=_[m],Y=R.children.length,D=this._minEntries;this._chooseSplitAxis(R,D,Y);var T=this._chooseSplitIndex(R,D,Y),K=k(R.children.splice(T,R.children.length-T));K.height=R.height,K.leaf=R.leaf,at(R,this.toBBox),at(K,this.toBBox),m?_[m-1].children.push(K):this._splitRoot(R,K)},st.prototype._splitRoot=function(_,m){this.data=k([_,m]),this.data.height=_.height+1,this.data.leaf=!1,at(this.data,this.toBBox)},st.prototype._chooseSplitIndex=function(_,m,R){for(var Y,D,T,K,ht,M,O,p=1/0,y=1/0,tt=m;tt<=R-m;tt++){var z=et(_,0,tt,this.toBBox),X=et(_,tt,R,this.toBBox),P=(D=z,T=X,K=void 0,ht=void 0,M=void 0,O=void 0,K=Math.max(D.minX,T.minX),ht=Math.max(D.minY,T.minY),M=Math.min(D.maxX,T.maxX),O=Math.min(D.maxY,T.maxY),Math.max(0,M-K)*Math.max(0,O-ht)),C=q(z)+q(X);P<p?(p=P,Y=tt,y=C<y?C:y):P===p&&C<y&&(y=C,Y=tt)}return Y||R-m},st.prototype._chooseSplitAxis=function(_,m,R){var Y=_.leaf?this.compareMinX:xt,D=_.leaf?this.compareMinY:V;this._allDistMargin(_,m,R,Y)<this._allDistMargin(_,m,R,D)&&_.children.sort(Y)},st.prototype._allDistMargin=function(_,m,R,Y){_.children.sort(Y);for(var D=this.toBBox,T=et(_,0,m,D),K=et(_,R-m,R,D),ht=Q(T)+Q(K),M=m;M<R-m;M++){var O=_.children[M];it(T,_.leaf?D(O):O),ht+=Q(T)}for(var p=R-m-1;p>=m;p--){var y=_.children[p];it(K,_.leaf?D(y):y),ht+=Q(K)}return ht},st.prototype._adjustParentBBoxes=function(_,m,R){for(var Y=R;Y>=0;Y--)it(m[Y],_)},st.prototype._condense=function(_){for(var m=_.length-1,R=void 0;m>=0;m--)0===_[m].children.length?m>0?(R=_[m-1].children).splice(R.indexOf(_[m]),1):this.clear():at(_[m],this.toBBox)},st}()},3171:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>V});var q,gt=E(3632),st=E(9972),rt=E(1911),at=E(1729),et=(q=function(Q,U){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,k){Z.__proto__=k}||function(Z,k){for(var I in k)Object.prototype.hasOwnProperty.call(k,I)&&(Z[I]=k[I])})(Q,U)},function(Q,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function Z(){this.constructor=Q}q(Q,U),Q.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)}),it=function(q){function Q(U){var Z=q.call(this)||this;if(Z.on,Z.once,Z.un,Z.id_=void 0,Z.geometryName_="geometry",Z.style_=null,Z.styleFunction_=void 0,Z.geometryChangeKey_=null,Z.addChangeListener(Z.geometryName_,Z.handleGeometryChanged_),U)if("function"==typeof U.getSimplifiedGeometry){var k=U;Z.setGeometry(k)}else{var I=U;Z.setProperties(I)}return Z}return et(Q,q),Q.prototype.clone=function(){var U=new Q(this.hasProperties()?this.getProperties():null);U.setGeometryName(this.getGeometryName());var Z=this.getGeometry();Z&&U.setGeometry(Z.clone());var k=this.getStyle();return k&&U.setStyle(k),U},Q.prototype.getGeometry=function(){return this.get(this.geometryName_)},Q.prototype.getId=function(){return this.id_},Q.prototype.getGeometryName=function(){return this.geometryName_},Q.prototype.getStyle=function(){return this.style_},Q.prototype.getStyleFunction=function(){return this.styleFunction_},Q.prototype.handleGeometryChange_=function(){this.changed()},Q.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,at.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var U=this.getGeometry();U&&(this.geometryChangeKey_=(0,at.oL)(U,st.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},Q.prototype.setGeometry=function(U){this.set(this.geometryName_,U)},Q.prototype.setStyle=function(U){this.style_=U,this.styleFunction_=U?function xt(q){if("function"==typeof q)return q;var Q;if(Array.isArray(q))Q=q;else{(0,rt.h)("function"==typeof q.getZIndex,41),Q=[q]}return function(){return Q}}(U):void 0,this.changed()},Q.prototype.setId=function(U){this.id_=U,this.changed()},Q.prototype.setGeometryName=function(U){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=U,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},Q}(gt.Z);const V=it},7830:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>Q});var U,gt=E(3632),st=E(7656),rt=E(5263),at=E(760),et=E(1729),it=E(1992),xt=(U=function(Z,k){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,_){I.__proto__=_}||function(I,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(I[m]=_[m])})(Z,k)},function(Z,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function I(){this.constructor=Z}U(Z,k),Z.prototype=null===k?Object.create(k):(I.prototype=k.prototype,new I)}),V_ELEMENT="element",V_MAP="map",V_OFFSET="offset",V_POSITION="position",V_POSITIONING="positioning",q=function(U){function Z(k){var I=U.call(this)||this;return I.on,I.once,I.un,I.options=k,I.id=k.id,I.insertFirst=void 0===k.insertFirst||k.insertFirst,I.stopEvent=void 0===k.stopEvent||k.stopEvent,I.element=document.createElement("div"),I.element.className=void 0!==k.className?k.className:"ol-overlay-container "+rt.$A,I.element.style.position="absolute",I.element.style.pointerEvents="auto",I.autoPan=!0===k.autoPan?{}:k.autoPan||void 0,I.rendered={transform_:"",visible:!0},I.mapPostrenderListenerKey=null,I.addChangeListener(V_ELEMENT,I.handleElementChanged),I.addChangeListener(V_MAP,I.handleMapChanged),I.addChangeListener(V_OFFSET,I.handleOffsetChanged),I.addChangeListener(V_POSITION,I.handlePositionChanged),I.addChangeListener(V_POSITIONING,I.handlePositioningChanged),void 0!==k.element&&I.setElement(k.element),I.setOffset(void 0!==k.offset?k.offset:[0,0]),I.setPositioning(k.positioning||"top-left"),void 0!==k.position&&I.setPosition(k.position),I}return xt(Z,U),Z.prototype.getElement=function(){return this.get(V_ELEMENT)},Z.prototype.getId=function(){return this.id},Z.prototype.getMap=function(){return this.get(V_MAP)||null},Z.prototype.getOffset=function(){return this.get(V_OFFSET)},Z.prototype.getPosition=function(){return this.get(V_POSITION)},Z.prototype.getPositioning=function(){return this.get(V_POSITIONING)},Z.prototype.handleElementChanged=function(){(0,it.ep)(this.element);var k=this.getElement();k&&this.element.appendChild(k)},Z.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,it.ZF)(this.element),(0,et.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var k=this.getMap();if(k){this.mapPostrenderListenerKey=(0,et.oL)(k,st.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var I=this.stopEvent?k.getOverlayContainerStopEvent():k.getOverlayContainer();this.insertFirst?I.insertBefore(this.element,I.childNodes[0]||null):I.appendChild(this.element),this.performAutoPan()}},Z.prototype.render=function(){this.updatePixelPosition()},Z.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},Z.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},Z.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},Z.prototype.setElement=function(k){this.set(V_ELEMENT,k)},Z.prototype.setMap=function(k){this.set(V_MAP,k)},Z.prototype.setOffset=function(k){this.set(V_OFFSET,k)},Z.prototype.setPosition=function(k){this.set(V_POSITION,k)},Z.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},Z.prototype.panIntoView=function(k){var I=this.getMap();if(I&&I.getTargetElement()&&this.get(V_POSITION)){var _=this.getRect(I.getTargetElement(),I.getSize()),m=this.getElement(),R=this.getRect(m,[(0,it.iO)(m),(0,it.Pb)(m)]),Y=k||{},D=void 0===Y.margin?20:Y.margin;if(!(0,at.r4)(_,R)){var T=R[0]-_[0],K=_[2]-R[2],ht=R[1]-_[1],M=_[3]-R[3],O=[0,0];if(T<0?O[0]=T-D:K<0&&(O[0]=Math.abs(K)+D),ht<0?O[1]=ht-D:M<0&&(O[1]=Math.abs(M)+D),0!==O[0]||0!==O[1]){var p=I.getView().getCenterInternal(),y=I.getPixelFromCoordinateInternal(p);if(!y)return;var tt=[y[0]+O[0],y[1]+O[1]],z=Y.animation||{};I.getView().animateInternal({center:I.getCoordinateFromPixelInternal(tt),duration:z.duration,easing:z.easing})}}}},Z.prototype.getRect=function(k,I){var _=k.getBoundingClientRect(),m=_.left+window.pageXOffset,R=_.top+window.pageYOffset;return[m,R,m+I[0],R+I[1]]},Z.prototype.setPositioning=function(k){this.set(V_POSITIONING,k)},Z.prototype.setVisible=function(k){this.rendered.visible!==k&&(this.element.style.display=k?"":"none",this.rendered.visible=k)},Z.prototype.updatePixelPosition=function(){var k=this.getMap(),I=this.getPosition();if(k&&k.isRendered()&&I){var _=k.getPixelFromCoordinate(I),m=k.getSize();this.updateRenderedPosition(_,m)}else this.setVisible(!1)},Z.prototype.updateRenderedPosition=function(k,I){var _=this.element.style,m=this.getOffset(),R=this.getPositioning();this.setVisible(!0);var Y=Math.round(k[0]+m[0])+"px",D=Math.round(k[1]+m[1])+"px",T="0%",K="0%";"bottom-right"==R||"center-right"==R||"top-right"==R?T="-100%":("bottom-center"==R||"center-center"==R||"top-center"==R)&&(T="-50%"),"bottom-left"==R||"bottom-center"==R||"bottom-right"==R?K="-100%":("center-left"==R||"center-center"==R||"center-right"==R)&&(K="-50%");var ht="translate(".concat(T,", ").concat(K,") translate(").concat(Y,", ").concat(D,")");this.rendered.transform_!=ht&&(this.rendered.transform_=ht,_.transform=ht)},Z.prototype.getOptions=function(){return this.options},Z}(gt.Z);const Q=q},5813:(Ut,wt,E)=>{"use strict";E.d(wt,{y:()=>st});var gt=E(3783);function st(rt){return Array.isArray(rt)?(0,gt.BB)(rt):rt}},3343:(Ut,wt,E)=>{"use strict";function gt(rt,at,et,it){for(var xt=rt[at],V=rt[at+1],q=0,Q=at+it;Q<et;Q+=it){var U=rt[Q],Z=rt[Q+1];q+=Math.sqrt((U-xt)*(U-xt)+(Z-V)*(Z-V)),xt=U,V=Z}return q}E.d(wt,{W:()=>gt})},632:(Ut,wt,E)=>{"use strict";E.d(wt,{ZP:()=>Ze});var W,gt=E(9235),st=E(760),rt=E(8999),at=E(874),et=(W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)},function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}),it=function(W){function v(r,o,h){var d=W.call(this)||this;if(void 0!==h&&void 0===o)d.setFlatCoordinates(h,r);else{var w=o||0;d.setCenterAndRadius(r,w,h)}return d}return et(v,W),v.prototype.clone=function(){var r=new v(this.flatCoordinates.slice(),void 0,this.layout);return r.applyProperties(this),r},v.prototype.closestPointXY=function(r,o,h,d){var w=this.flatCoordinates,A=r-w[0],H=o-w[1],ut=A*A+H*H;if(ut<d){if(0===ut)for(var ft=0;ft<this.stride;++ft)h[ft]=w[ft];else{var Et=this.getRadius()/Math.sqrt(ut);h[0]=w[0]+Et*A,h[1]=w[1]+Et*H;for(ft=2;ft<this.stride;++ft)h[ft]=w[ft]}return h.length=this.stride,ut}return d},v.prototype.containsXY=function(r,o){var h=this.flatCoordinates,d=r-h[0],w=o-h[1];return d*d+w*w<=this.getRadiusSquared_()},v.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},v.prototype.computeExtent=function(r){var o=this.flatCoordinates,h=o[this.stride]-o[0];return(0,st.T9)(o[0]-h,o[1]-h,o[0]+h,o[1]+h,r)},v.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},v.prototype.getRadiusSquared_=function(){var r=this.flatCoordinates[this.stride]-this.flatCoordinates[0],o=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return r*r+o*o},v.prototype.getType=function(){return"Circle"},v.prototype.intersectsExtent=function(r){var o=this.getExtent();if((0,st.kK)(r,o)){var h=this.getCenter();return r[0]<=h[0]&&r[2]>=h[0]||r[1]<=h[1]&&r[3]>=h[1]||(0,st.H6)(r,this.intersectsCoordinate.bind(this))}return!1},v.prototype.setCenter=function(r){var o=this.stride,h=this.flatCoordinates[o]-this.flatCoordinates[0],d=r.slice();d[o]=d[0]+h;for(var w=1;w<o;++w)d[o+w]=r[w];this.setFlatCoordinates(this.layout,d),this.changed()},v.prototype.setCenterAndRadius=function(r,o,h){this.setLayout(h,r,0),this.flatCoordinates||(this.flatCoordinates=[]);var d=this.flatCoordinates,w=(0,rt.IG)(d,0,r,this.stride);d[w++]=d[0]+o;for(var A=1,H=this.stride;A<H;++A)d[w++]=d[A];d.length=w,this.changed()},v.prototype.getCoordinates=function(){return null},v.prototype.setCoordinates=function(r,o){},v.prototype.setRadius=function(r){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+r,this.changed()},v.prototype.rotate=function(r,o){var h=this.getCenter(),d=this.getStride();this.setCenter((0,at.U1)(h,0,h.length,d,r,o,h)),this.changed()},v.prototype.translate=function(r,o){var h=this.getCenter(),d=this.getStride();this.setCenter((0,at.Iu)(h,0,h.length,d,r,o,h)),this.changed()},v}(gt.ZP);it.prototype.transform;const xt=it;var V=E(8214),q=E(9972),Q=E(3171),U=E(4904),Z=E(5066),k=E(9182),I=E(2456),_=E(3280),m=E(392),R=E(2156);function Y(W,v,r,o,h,d,w){var A,H,ut=(r-v)/o;if(1===ut)A=v;else if(2===ut)A=v,H=h;else if(0!==ut){for(var ft=W[v],Et=W[v+1],Ft=0,Bt=[0],St=v+o;St<r;St+=o){var qt=W[St],he=W[St+1];Ft+=Math.sqrt((qt-ft)*(qt-ft)+(he-Et)*(he-Et)),Bt.push(Ft),ft=qt,Et=he}var pe=h*Ft,le=(0,I.ry)(Bt,pe);le<0?(H=(pe-Bt[-le-2])/(Bt[-le-1]-Bt[-le-2]),A=v+(-le-2)*o):A=v+le*o}var ye=w>1?w:2,Re=d||new Array(ye);for(St=0;St<ye;++St)Re[St]=void 0===A?NaN:void 0===H?W[A+St]:(0,R.t7)(W[A+St],W[A+o+St],H);return Re}function D(W,v,r,o,h,d){if(r==v)return null;var w;if(h<W[v+o-1])return d?((w=W.slice(v,v+o))[o-1]=h,w):null;if(W[r-1]<h)return d?((w=W.slice(r-o,r))[o-1]=h,w):null;if(h==W[v+o-1])return W.slice(v,v+o);for(var A=v/o,H=r/o;A<H;){var ut=A+H>>1;h<W[(ut+1)*o-1]?H=ut:A=ut+1}var ft=W[A*o-1];if(h==ft)return W.slice((A-1)*o,(A-1)*o+o);var Ft=(h-ft)/(W[(A+1)*o-1]-ft);w=[];for(var Bt=0;Bt<o-1;++Bt)w.push((0,R.t7)(W[(A-1)*o+Bt],W[A*o+Bt],Ft));return w.push(h),w}var K=E(9644),ht=E(3343),M=function(){var W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)};return function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),O=function(W){function v(r,o){var h=W.call(this)||this;return h.flatMidpoint_=null,h.flatMidpointRevision_=-1,h.maxDelta_=-1,h.maxDeltaRevision_=-1,void 0===o||Array.isArray(r[0])?h.setCoordinates(r,o):h.setFlatCoordinates(o,r),h}return M(v,W),v.prototype.appendCoordinate=function(r){this.flatCoordinates?(0,I.l7)(this.flatCoordinates,r):this.flatCoordinates=r.slice(),this.changed()},v.prototype.clone=function(){var r=new v(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},v.prototype.closestPointXY=function(r,o,h,d){return d<(0,st.qf)(this.getExtent(),r,o)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Z.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Z.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,r,o,h,d))},v.prototype.forEachSegment=function(r){return(0,_.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},v.prototype.getCoordinateAtM=function(r,o){if("XYM"!=this.layout&&"XYZM"!=this.layout)return null;var h=void 0!==o&&o;return D(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,h)},v.prototype.getCoordinates=function(){return(0,m.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},v.prototype.getCoordinateAt=function(r,o){return Y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,o,this.stride)},v.prototype.getLength=function(){return(0,ht.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},v.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},v.prototype.getSimplifiedGeometryInternal=function(r){var o=[];return o.length=(0,k.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,o,0),new v(o,"XY")},v.prototype.getType=function(){return"LineString"},v.prototype.intersectsExtent=function(r){return(0,K.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},v.prototype.setCoordinates=function(r,o){this.setLayout(o,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,rt.Sg)(this.flatCoordinates,0,r,this.stride),this.changed()},v}(gt.ZP);const p=O;var y=E(1994),tt=E(4624),z=function(){var W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)};return function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),X=function(W){function v(r,o,h){var d=W.call(this)||this;if(d.ends_=[],d.maxDelta_=-1,d.maxDeltaRevision_=-1,Array.isArray(r[0]))d.setCoordinates(r,o);else if(void 0!==o&&h)d.setFlatCoordinates(o,r),d.ends_=h;else{for(var w=d.getLayout(),A=r,H=[],ut=[],ft=0,Et=A.length;ft<Et;++ft){var Ft=A[ft];0===ft&&(w=Ft.getLayout()),(0,I.l7)(H,Ft.getFlatCoordinates()),ut.push(H.length)}d.setFlatCoordinates(w,H),d.ends_=ut}return d}return z(v,W),v.prototype.appendLineString=function(r){this.flatCoordinates?(0,I.l7)(this.flatCoordinates,r.getFlatCoordinates().slice()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},v.prototype.clone=function(){var r=new v(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},v.prototype.closestPointXY=function(r,o,h,d){return d<(0,st.qf)(this.getExtent(),r,o)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Z.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Z.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,r,o,h,d))},v.prototype.getCoordinateAtM=function(r,o,h){if("XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length)return null;var d=void 0!==o&&o,w=void 0!==h&&h;return function T(W,v,r,o,h,d,w){if(w)return D(W,v,r[r.length-1],o,h,d);var A;if(h<W[o-1])return d?((A=W.slice(0,o))[o-1]=h,A):null;if(W[W.length-1]<h)return d?((A=W.slice(W.length-o))[o-1]=h,A):null;for(var H=0,ut=r.length;H<ut;++H){var ft=r[H];if(v!=ft){if(h<W[v+o-1])return null;if(h<=W[ft-1])return D(W,v,ft,o,h,!1);v=ft}}return null}(this.flatCoordinates,0,this.ends_,this.stride,r,d,w)},v.prototype.getCoordinates=function(){return(0,m.o1)(this.flatCoordinates,0,this.ends_,this.stride)},v.prototype.getEnds=function(){return this.ends_},v.prototype.getLineString=function(r){return r<0||this.ends_.length<=r?null:new p(this.flatCoordinates.slice(0===r?0:this.ends_[r-1],this.ends_[r]),this.layout)},v.prototype.getLineStrings=function(){for(var r=this.flatCoordinates,o=this.ends_,h=this.layout,d=[],w=0,A=0,H=o.length;A<H;++A){var ut=o[A],ft=new p(r.slice(w,ut),h);d.push(ft),w=ut}return d},v.prototype.getFlatMidpoints=function(){for(var r=[],o=this.flatCoordinates,h=0,d=this.ends_,w=this.stride,A=0,H=d.length;A<H;++A){var ut=d[A],ft=Y(o,h,ut,w,.5);(0,I.l7)(r,ft),h=ut}return r},v.prototype.getSimplifiedGeometryInternal=function(r){var o=[],h=[];return o.length=(0,k.UJ)(this.flatCoordinates,0,this.ends_,this.stride,r,o,0,h),new v(o,"XY",h)},v.prototype.getType=function(){return"MultiLineString"},v.prototype.intersectsExtent=function(r){return(0,K.AW)(this.flatCoordinates,0,this.ends_,this.stride,r)},v.prototype.setCoordinates=function(r,o){this.setLayout(o,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var h=(0,rt._5)(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=0===h.length?0:h[h.length-1],this.changed()},v}(gt.ZP);const P=X;var C=E(2597),F=function(){var W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)};return function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),J=function(W){function v(r,o){var h=W.call(this)||this;return o&&!Array.isArray(r[0])?h.setFlatCoordinates(o,r):h.setCoordinates(r,o),h}return F(v,W),v.prototype.appendPoint=function(r){this.flatCoordinates?(0,I.l7)(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.changed()},v.prototype.clone=function(){var r=new v(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},v.prototype.closestPointXY=function(r,o,h,d){if(d<(0,st.qf)(this.getExtent(),r,o))return d;for(var w=this.flatCoordinates,A=this.stride,H=0,ut=w.length;H<ut;H+=A){var ft=(0,R.bI)(r,o,w[H],w[H+1]);if(ft<d){d=ft;for(var Et=0;Et<A;++Et)h[Et]=w[H+Et];h.length=A}}return d},v.prototype.getCoordinates=function(){return(0,m.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},v.prototype.getPoint=function(r){var o=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return r<0||o<=r?null:new C.Z(this.flatCoordinates.slice(r*this.stride,(r+1)*this.stride),this.layout)},v.prototype.getPoints=function(){for(var r=this.flatCoordinates,o=this.layout,h=this.stride,d=[],w=0,A=r.length;w<A;w+=h){var H=new C.Z(r.slice(w,w+h),o);d.push(H)}return d},v.prototype.getType=function(){return"MultiPoint"},v.prototype.intersectsExtent=function(r){for(var o=this.flatCoordinates,h=this.stride,d=0,w=o.length;d<w;d+=h){var A=o[d],H=o[d+1];if((0,st.jE)(r,A,H))return!0}return!1},v.prototype.setCoordinates=function(r,o){this.setLayout(o,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,rt.Sg)(this.flatCoordinates,0,r,this.stride),this.changed()},v}(gt.ZP);const lt=J;var nt=E(4173),_t=E(2474),Ot=E(1265),Wt=E(8818);var te=E(4325),Nt=function(){var W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)};return function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),jt=function(W){function v(r,o,h){var d=W.call(this)||this;if(d.endss_=[],d.flatInteriorPointsRevision_=-1,d.flatInteriorPoints_=null,d.maxDelta_=-1,d.maxDeltaRevision_=-1,d.orientedRevision_=-1,d.orientedFlatCoordinates_=null,!h&&!Array.isArray(r[0])){for(var w=d.getLayout(),A=r,H=[],ut=[],ft=0,Et=A.length;ft<Et;++ft){var Ft=A[ft];0===ft&&(w=Ft.getLayout());for(var Bt=H.length,St=Ft.getEnds(),qt=0,he=St.length;qt<he;++qt)St[qt]+=Bt;(0,I.l7)(H,Ft.getFlatCoordinates()),ut.push(St)}o=w,r=H,h=ut}return void 0!==o&&h?(d.setFlatCoordinates(o,r),d.endss_=h):d.setCoordinates(r,o),d}return Nt(v,W),v.prototype.appendPolygon=function(r){var o;if(this.flatCoordinates){var h=this.flatCoordinates.length;(0,I.l7)(this.flatCoordinates,r.getFlatCoordinates());for(var d=0,w=(o=r.getEnds().slice()).length;d<w;++d)o[d]+=h}else this.flatCoordinates=r.getFlatCoordinates().slice(),o=r.getEnds().slice(),this.endss_.push();this.endss_.push(o),this.changed()},v.prototype.clone=function(){for(var r=this.endss_.length,o=new Array(r),h=0;h<r;++h)o[h]=this.endss_[h].slice();var d=new v(this.flatCoordinates.slice(),this.layout,o);return d.applyProperties(this),d},v.prototype.closestPointXY=function(r,o,h,d){return d<(0,st.qf)(this.getExtent(),r,o)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Z.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Z.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,r,o,h,d))},v.prototype.containsXY=function(r,o){return(0,te.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r,o)},v.prototype.getArea=function(){return(0,Wt.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},v.prototype.getCoordinates=function(r){var o;return void 0!==r?(o=this.getOrientedFlatCoordinates().slice(),(0,Ot.dL)(o,0,this.endss_,this.stride,r)):o=this.flatCoordinates,(0,m.ug)(o,0,this.endss_,this.stride)},v.prototype.getEndss=function(){return this.endss_},v.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var r=function Yt(W,v,r,o){for(var h=[],d=(0,st.lJ)(),w=0,A=r.length;w<A;++w){var H=r[w];d=(0,st.GN)(W,v,H[0],o),h.push((d[0]+d[2])/2,(d[1]+d[3])/2),v=H[H.length-1]}return h}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,_t.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},v.prototype.getInteriorPoints=function(){return new lt(this.getFlatInteriorPoints().slice(),"XYM")},v.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;(0,Ot.Oj)(r,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=(0,Ot.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},v.prototype.getSimplifiedGeometryInternal=function(r){var o=[],h=[];return o.length=(0,k.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(r),o,0,h),new v(o,"XY",h)},v.prototype.getPolygon=function(r){if(r<0||this.endss_.length<=r)return null;var o;if(0===r)o=0;else{var h=this.endss_[r-1];o=h[h.length-1]}var d=this.endss_[r].slice(),w=d[d.length-1];if(0!==o)for(var A=0,H=d.length;A<H;++A)d[A]-=o;return new nt.ZP(this.flatCoordinates.slice(o,w),this.layout,d)},v.prototype.getPolygons=function(){for(var r=this.layout,o=this.flatCoordinates,h=this.endss_,d=[],w=0,A=0,H=h.length;A<H;++A){var ut=h[A].slice(),ft=ut[ut.length-1];if(0!==w)for(var Et=0,Ft=ut.length;Et<Ft;++Et)ut[Et]-=w;var Bt=new nt.ZP(o.slice(w,ft),r,ut);d.push(Bt),w=ft}return d},v.prototype.getType=function(){return"MultiPolygon"},v.prototype.intersectsExtent=function(r){return(0,K.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r)},v.prototype.setCoordinates=function(r,o){this.setLayout(o,r,3),this.flatCoordinates||(this.flatCoordinates=[]);var h=(0,rt.QT)(this.flatCoordinates,0,r,this.stride,this.endss_);if(0===h.length)this.flatCoordinates.length=0;else{var d=h[h.length-1];this.flatCoordinates.length=0===d.length?0:d[d.length-1]}this.changed()},v}(gt.ZP);const re=jt;var fe=E(5002),ce=E(768),ve=E(5947),kt=E(1345),bt=E(8313),se=E(5344),_e=E(1274),We=E(3481),oe=function(){var W=function(v,r){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])})(v,r)};return function(v,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=v}W(v,r),v.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Jt_DRAWSTART="drawstart",Jt_DRAWEND="drawend",Jt_DRAWABORT="drawabort",Kt=function(W){function v(r,o){var h=W.call(this,r)||this;return h.feature=o,h}return oe(v,W),v}(V.ZP),Qt=function(W){function v(r){var o=this,h=r;h.stopDown||(h.stopDown=kt.Dv),(o=W.call(this,h)||this).on,o.once,o.un,o.shouldHandle_=!1,o.downPx_=null,o.downTimeout_,o.lastDragTime_,o.pointerType_,o.freehand_=!1,o.source_=r.source?r.source:null,o.features_=r.features?r.features:null,o.snapTolerance_=r.snapTolerance?r.snapTolerance:12,o.type_=r.type,o.mode_=function we(W){switch(W){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+W)}}(o.type_),o.stopClick_=!!r.stopClick,o.minPoints_=r.minPoints?r.minPoints:"Polygon"===o.mode_?3:2,o.maxPoints_="Circle"===o.mode_?2:r.maxPoints?r.maxPoints:1/0,o.finishCondition_=r.finishCondition?r.finishCondition:kt.uX,o.geometryLayout_=r.geometryLayout?r.geometryLayout:"XY";var d=r.geometryFunction;if(!d){var A,w=o.mode_;if("Circle"===w)d=function(H,ut,ft){var Et=ut||new xt([NaN,NaN]),Ft=(0,_e.Vs)(H[0],ft),Bt=(0,We.bI)(Ft,(0,_e.Vs)(H[H.length-1],ft));Et.setCenterAndRadius(Ft,Math.sqrt(Bt),this.geometryLayout_);var St=(0,_e.Cs)();return St&&Et.transform(ft,St),Et};else"Point"===w?A=C.Z:"LineString"===w?A=p:"Polygon"===w&&(A=nt.ZP),d=function(H,ut,ft){return ut?"Polygon"===w?H[0].length?ut.setCoordinates([H[0].concat([H[0][0]])],this.geometryLayout_):ut.setCoordinates([],this.geometryLayout_):ut.setCoordinates(H,this.geometryLayout_):ut=new A(H,this.geometryLayout_),ut}}return o.geometryFunction_=d,o.dragVertexDelay_=void 0!==r.dragVertexDelay?r.dragVertexDelay:500,o.finishCoordinate_=null,o.sketchFeature_=null,o.sketchPoint_=null,o.sketchCoords_=null,o.sketchLine_=null,o.sketchLineCoords_=null,o.squaredClickTolerance_=r.clickTolerance?r.clickTolerance*r.clickTolerance:36,o.overlay_=new ce.Z({source:new ve.Z({useSpatialIndex:!1,wrapX:!!r.wrapX&&r.wrapX}),style:r.style?r.style:ee(),updateWhileInteracting:!0}),o.geometryName_=r.geometryName,o.condition_=r.condition?r.condition:bt.rM,o.freehandCondition_,r.freehand?o.freehandCondition_=bt.Bx:o.freehandCondition_=r.freehandCondition?r.freehandCondition:bt.vY,o.addChangeListener(U.Z.ACTIVE,o.updateState_),o}return oe(v,W),v.prototype.setMap=function(r){W.prototype.setMap.call(this,r),this.updateState_()},v.prototype.getOverlay=function(){return this.overlay_},v.prototype.handleEvent=function(r){r.originalEvent.type===q.Z.CONTEXTMENU&&r.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(r);var o=r.type===tt.Z.POINTERMOVE,h=!0;!this.freehand_&&this.lastDragTime_&&r.type===tt.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=r.pixel,this.shouldHandle_=!this.freehand_,o=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&r.type===tt.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(r.coordinate),h=!1):this.freehand_&&r.type===tt.Z.POINTERDOWN?h=!1:o&&this.getPointerCount()<2?(h=r.type===tt.Z.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(r),this.shouldHandle_&&r.originalEvent.preventDefault()):("mouse"===r.originalEvent.pointerType||r.type===tt.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(r):r.type===tt.Z.DBLCLICK&&(h=!1),W.prototype.handleEvent.call(this,r)&&h},v.prototype.handleDownEvent=function(r){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=r.pixel,this.finishCoordinate_||this.startDrawing_(r.coordinate),!0):this.condition_(r)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new y.Z(tt.Z.POINTERMOVE,r.map,r.originalEvent,!1,r.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=r.pixel,!0):(this.lastDragTime_=void 0,!1)},v.prototype.handleUpEvent=function(r){var o=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(r),this.shouldHandle_){var h=!this.finishCoordinate_;h&&this.startDrawing_(r.coordinate),!h&&this.freehand_?this.finishDrawing():!this.freehand_&&(!h||"Point"===this.mode_)&&(this.atFinish_(r.pixel)?this.finishCondition_(r)&&this.finishDrawing():this.addToDrawing_(r.coordinate)),o=!1}else this.freehand_&&this.abortDrawing();return!o&&this.stopClick_&&r.preventDefault(),o},v.prototype.handlePointerMove_=function(r){if(this.pointerType_=r.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var o=this.downPx_,h=r.pixel,d=o[0]-h[0],w=o[1]-h[1],A=d*d+w*w;if(this.shouldHandle_=this.freehand_?A>this.squaredClickTolerance_:A<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(r.coordinate):this.createOrUpdateSketchPoint_(r.coordinate.slice())},v.prototype.atFinish_=function(r){var o=!1;if(this.sketchFeature_){var h=!1,d=[this.finishCoordinate_],w=this.mode_;if("Point"===w)o=!0;else if("Circle"===w)o=2===this.sketchCoords_.length;else if("LineString"===w)h=this.sketchCoords_.length>this.minPoints_;else if("Polygon"===w){var A=this.sketchCoords_;h=A[0].length>this.minPoints_,d=[A[0][0],A[0][A[0].length-2]]}if(h)for(var H=this.getMap(),ut=0,ft=d.length;ut<ft;ut++){var Et=d[ut],Ft=H.getPixelFromCoordinate(Et),Bt=r[0]-Ft[0],St=r[1]-Ft[1],qt=this.freehand_?1:this.snapTolerance_;if(o=Math.sqrt(Bt*Bt+St*St)<=qt){this.finishCoordinate_=Et;break}}}return o},v.prototype.createOrUpdateSketchPoint_=function(r){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(r):(this.sketchPoint_=new Q.Z(new C.Z(r)),this.updateSketchFeatures_())},v.prototype.createOrUpdateCustomSketchLine_=function(r){this.sketchLine_||(this.sketchLine_=new Q.Z);var o=r.getLinearRing(0),h=this.sketchLine_.getGeometry();h?(h.setFlatCoordinates(o.getLayout(),o.getFlatCoordinates()),h.changed()):(h=new p(o.getFlatCoordinates(),o.getLayout()),this.sketchLine_.setGeometry(h))},v.prototype.startDrawing_=function(r){for(var o=this.getMap().getView().getProjection(),h=(0,gt.tP)(this.geometryLayout_);r.length<h;)r.push(0);this.finishCoordinate_=r,"Point"===this.mode_?this.sketchCoords_=r.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[r.slice(),r.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[r.slice(),r.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Q.Z(new p(this.sketchLineCoords_)));var d=this.geometryFunction_(this.sketchCoords_,void 0,o);this.sketchFeature_=new Q.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(d),this.updateSketchFeatures_(),this.dispatchEvent(new Kt(Jt_DRAWSTART,this.sketchFeature_))},v.prototype.modifyDrawing_=function(r){for(var A,H,o=this.getMap(),h=this.sketchFeature_.getGeometry(),d=o.getView().getProjection(),w=(0,gt.tP)(this.geometryLayout_);r.length<w;)r.push(0);("Point"===this.mode_?H=this.sketchCoords_:"Polygon"===this.mode_?(H=(A=this.sketchCoords_[0])[A.length-1],this.atFinish_(o.getPixelFromCoordinate(r))&&(r=this.finishCoordinate_.slice())):H=(A=this.sketchCoords_)[A.length-1],H[0]=r[0],H[1]=r[1],this.geometryFunction_(this.sketchCoords_,h,d),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(r);if("Polygon"===h.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(h);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},v.prototype.addToDrawing_=function(r){var d,w,o=this.sketchFeature_.getGeometry(),h=this.getMap().getView().getProjection(),A=this.mode_;"LineString"===A||"Circle"===A?(this.finishCoordinate_=r.slice(),(w=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?w.pop():d=!0),w.push(r.slice()),this.geometryFunction_(w,o,h)):"Polygon"===A&&((w=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?w.pop():d=!0),w.push(r.slice()),d&&(this.finishCoordinate_=w[0]),this.geometryFunction_(this.sketchCoords_,o,h)),this.createOrUpdateSketchPoint_(r.slice()),this.updateSketchFeatures_(),d&&this.finishDrawing()},v.prototype.removeLastPoint=function(){if(this.sketchFeature_){var h,r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),d=this.mode_;if("LineString"===d||"Circle"===d){if((h=this.sketchCoords_).splice(-2,1),h.length>=2){this.finishCoordinate_=h[h.length-2].slice();var w=this.finishCoordinate_.slice();h[h.length-1]=w,this.createOrUpdateSketchPoint_(w)}this.geometryFunction_(h,r,o),"Polygon"===r.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(r)}else if("Polygon"===d){(h=this.sketchCoords_[0]).splice(-2,1);var A=this.sketchLine_.getGeometry();if(h.length>=2){w=h[h.length-2].slice();h[h.length-1]=w,this.createOrUpdateSketchPoint_(w)}A.setCoordinates(h),this.geometryFunction_(this.sketchCoords_,r,o)}1===h.length&&this.abortDrawing(),this.updateSketchFeatures_()}},v.prototype.finishDrawing=function(){var r=this.abortDrawing_();if(r){var o=this.sketchCoords_,h=r.getGeometry(),d=this.getMap().getView().getProjection();"LineString"===this.mode_?(o.pop(),this.geometryFunction_(o,h,d)):"Polygon"===this.mode_&&(o[0].pop(),this.geometryFunction_(o,h,d),o=h.getCoordinates()),"MultiPoint"===this.type_?r.setGeometry(new lt([o])):"MultiLineString"===this.type_?r.setGeometry(new P([o])):"MultiPolygon"===this.type_&&r.setGeometry(new re([o])),this.dispatchEvent(new Kt(Jt_DRAWEND,r)),this.features_&&this.features_.push(r),this.source_&&this.source_.addFeature(r)}},v.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var r=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),r},v.prototype.abortDrawing=function(){var r=this.abortDrawing_();r&&this.dispatchEvent(new Kt(Jt_DRAWABORT,r))},v.prototype.appendCoordinates=function(r){var d,o=this.mode_,h=!this.sketchFeature_;if(h&&this.startDrawing_(r[0]),"LineString"===o||"Circle"===o)d=this.sketchCoords_;else{if("Polygon"!==o)return;d=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}h&&d.shift(),d.pop();for(var w=0;w<r.length;w++)this.addToDrawing_(r[w]);var A=r[r.length-1];this.addToDrawing_(A),this.modifyDrawing_(A)},v.prototype.extend=function(r){var h=r.getGeometry();this.sketchFeature_=r,this.sketchCoords_=h.getCoordinates();var d=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=d.slice(),this.sketchCoords_.push(d.slice()),this.sketchPoint_=new Q.Z(new C.Z(d)),this.updateSketchFeatures_(),this.dispatchEvent(new Kt(Jt_DRAWSTART,this.sketchFeature_))},v.prototype.updateSketchFeatures_=function(){var r=[];this.sketchFeature_&&r.push(this.sketchFeature_),this.sketchLine_&&r.push(this.sketchLine_),this.sketchPoint_&&r.push(this.sketchPoint_);var o=this.overlay_.getSource();o.clear(!0),o.addFeatures(r)},v.prototype.updateState_=function(){var r=this.getMap(),o=this.getActive();(!r||!o)&&this.abortDrawing(),this.overlay_.setMap(o?r:null)},v}(fe.Z);function ee(){var W=(0,se.Ly)();return function(v,r){return W[v.getGeometry().getType()]}}const Ze=Qt},768:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>Ni});var c,gt=E(4593),st=E(2402),rt=E(9466),at=E(5344),et=(c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),it_RENDER_ORDER="renderOrder",xt=function(c){function n(t){var i=this,e=t||{},a=(0,rt.f0)({},e);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,(i=c.call(this,a)||this).declutter_=void 0!==e.declutter&&e.declutter,i.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(e.style),i.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,i.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,i}return et(n,c),n.prototype.getDeclutter=function(){return this.declutter_},n.prototype.getFeatures=function(t){return c.prototype.getFeatures.call(this,t)},n.prototype.getRenderBuffer=function(){return this.renderBuffer_},n.prototype.getRenderOrder=function(){return this.get(it_RENDER_ORDER)},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},n.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new st(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(it_RENDER_ORDER,t)},n.prototype.setStyle=function(t){this.style_=void 0!==t?t:at.yF,this.styleFunction_=null===t?void 0:(0,at.J$)(this.style_),this.changed()},n}(gt.Z);const V=xt;var q={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Q=[q.FILL],U=[q.STROKE],Z=[q.BEGIN_PATH],k=[q.CLOSE_PATH];const I=q;var _=E(2401),m=function(){function c(){}return c.prototype.drawCustom=function(n,t,i,e){},c.prototype.drawGeometry=function(n){},c.prototype.setStyle=function(n){},c.prototype.drawCircle=function(n,t){},c.prototype.drawFeature=function(n,t){},c.prototype.drawGeometryCollection=function(n,t){},c.prototype.drawLineString=function(n,t){},c.prototype.drawMultiLineString=function(n,t){},c.prototype.drawMultiPoint=function(n,t){},c.prototype.drawMultiPolygon=function(n,t){},c.prototype.drawPoint=function(n,t){},c.prototype.drawPolygon=function(n,t){},c.prototype.drawText=function(n,t){},c.prototype.setFillStrokeStyle=function(n,t){},c.prototype.setImageStyle=function(n,t){},c.prototype.setTextStyle=function(n,t){},c}();const R=m;var Y=E(5813),D=E(760),T=E(4686),K=E(2456),ht=E(392),M=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),O=function(c){function n(t,i,e,a){var s=c.call(this)||this;return s.tolerance=t,s.maxExtent=i,s.pixelRatio=a,s.maxLineWidth=0,s.resolution=e,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return M(n,c),n.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return 1==i?t:t.map(function(e){return e*i})},n.prototype.appendFlatPointCoordinates=function(t,i){for(var e=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,s=this.coordinates,l=s.length,f=0,u=t.length;f<u;f+=i)a[0]=t[f],a[1]=t[f+1],(0,D.b8)(e,a)&&(s[l++]=a[0],s[l++]=a[1]);return l},n.prototype.appendFlatLineCoordinates=function(t,i,e,a,s,l){var f=this.coordinates,u=f.length,g=this.getBufferedMaxExtent();l&&(i+=a);var G,j,b,x=t[i],S=t[i+1],L=this.tmpCoordinate_,B=!0;for(G=i+a;G<e;G+=a)L[0]=t[G],L[1]=t[G+1],(b=(0,D.pX)(g,L))!==j?(B&&(f[u++]=x,f[u++]=S,B=!1),f[u++]=L[0],f[u++]=L[1]):b===_.Z.INTERSECTING?(f[u++]=L[0],f[u++]=L[1],B=!1):B=!0,x=L[0],S=L[1],j=b;return(s&&B||G===i+a)&&(f[u++]=x,f[u++]=S),u},n.prototype.drawCustomCoordinates_=function(t,i,e,a,s){for(var l=0,f=e.length;l<f;++l){var u=e[l],g=this.appendFlatLineCoordinates(t,i,u,a,!1,!1);s.push(g),i=u}return i},n.prototype.drawCustom=function(t,i,e,a){this.beginGeometry(t,i);var u,g,x,S,L,s=t.getType(),l=t.getStride(),f=this.coordinates.length;switch(s){case"MultiPolygon":u=t.getOrientedFlatCoordinates(),S=[];var B=t.getEndss();L=0;for(var G=0,j=B.length;G<j;++G){var b=[];L=this.drawCustomCoordinates_(u,L,B[G],l,b),S.push(b)}this.instructions.push([I.CUSTOM,f,S,t,e,ht.ug]),this.hitDetectionInstructions.push([I.CUSTOM,f,S,t,a||e,ht.ug]);break;case"Polygon":case"MultiLineString":x=[],u="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),L=this.drawCustomCoordinates_(u,0,t.getEnds(),l,x),this.instructions.push([I.CUSTOM,f,x,t,e,ht.o1]),this.hitDetectionInstructions.push([I.CUSTOM,f,x,t,a||e,ht.o1]);break;case"LineString":case"Circle":u=t.getFlatCoordinates(),g=this.appendFlatLineCoordinates(u,0,u.length,l,!1,!1),this.instructions.push([I.CUSTOM,f,g,t,e,ht.Ml]),this.hitDetectionInstructions.push([I.CUSTOM,f,g,t,a||e,ht.Ml]);break;case"MultiPoint":u=t.getFlatCoordinates(),(g=this.appendFlatPointCoordinates(u,l))>f&&(this.instructions.push([I.CUSTOM,f,g,t,e,ht.Ml]),this.hitDetectionInstructions.push([I.CUSTOM,f,g,t,a||e,ht.Ml]));break;case"Point":u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),g=this.coordinates.length,this.instructions.push([I.CUSTOM,f,g,t,e]),this.hitDetectionInstructions.push([I.CUSTOM,f,g,t,a||e])}this.endGeometry(i)},n.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[I.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[I.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,a,s,e=t.length,l=-1;for(i=0;i<e;++i)(s=(a=t[i])[0])==I.END_GEOMETRY?l=i:s==I.BEGIN_GEOMETRY&&(a[2]=i,(0,K.FZ)(this.hitDetectionInstructions,l,i),l=-1)},n.prototype.setFillStrokeStyle=function(t,i){var e=this.state;if(t){var a=t.getColor();e.fillStyle=(0,Y.y)(a||T.bL)}else e.fillStyle=void 0;if(i){var s=i.getColor();e.strokeStyle=(0,Y.y)(s||T.Tx);var l=i.getLineCap();e.lineCap=void 0!==l?l:T.mb;var f=i.getLineDash();e.lineDash=f?f.slice():T.X9;var u=i.getLineDashOffset();e.lineDashOffset=u||T.He;var g=i.getLineJoin();e.lineJoin=void 0!==g?g:T.rc;var x=i.getWidth();e.lineWidth=void 0!==x?x:T.yC;var S=i.getMiterLimit();e.miterLimit=void 0!==S?S:T.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0},n.prototype.createFill=function(t){var i=t.fillStyle,e=[I.SET_FILL_STYLE,i];return"string"!=typeof i&&e.push(!0),e},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[I.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,i){var e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(i.call(this,t)),t.currentFillStyle=e)},n.prototype.updateStrokeStyle=function(t,i){var e=t.strokeStyle,a=t.lineCap,s=t.lineDash,l=t.lineDashOffset,f=t.lineJoin,u=t.lineWidth,g=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=a||s!=t.currentLineDash&&!(0,K.fS)(t.currentLineDash,s)||t.currentLineDashOffset!=l||t.currentLineJoin!=f||t.currentLineWidth!=u||t.currentMiterLimit!=g)&&(void 0!==e&&i.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=a,t.currentLineDash=s,t.currentLineDashOffset=l,t.currentLineJoin=f,t.currentLineWidth=u,t.currentMiterLimit=g)},n.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[I.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},n.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,D.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,D.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},n}(R);const p=O;var y=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),tt=function(c){function n(t,i,e,a){var s=c.call(this,t,i,e,a)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterMode_=void 0,s.declutterImageWithText_=void 0,s}return y(n,c),n.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,l=this.appendFlatPointCoordinates(e,a);this.instructions.push([I.DRAW_IMAGE,s,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,s,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},n.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,l=this.appendFlatPointCoordinates(e,a);this.instructions.push([I.DRAW_IMAGE,s,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([I.DRAW_IMAGE,s,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,c.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),a=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i},n}(p);const z=tt;var X=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),P=function(c){function n(t,i,e,a){return c.call(this,t,i,e,a)||this}return X(n,c),n.prototype.drawFlatCoordinates_=function(t,i,e,a){var s=this.coordinates.length,l=this.appendFlatLineCoordinates(t,i,e,a,!1,!1),f=[I.MOVE_TO_LINE_TO,s,l];return this.instructions.push(f),this.hitDetectionInstructions.push(f),e},n.prototype.drawLineString=function(t,i){var e=this.state,a=e.strokeStyle,s=e.lineWidth;if(void 0!==a&&void 0!==s){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,T.X9,T.He],Z);var l=t.getFlatCoordinates(),f=t.getStride();this.drawFlatCoordinates_(l,0,l.length,f),this.hitDetectionInstructions.push(U),this.endGeometry(i)}},n.prototype.drawMultiLineString=function(t,i){var e=this.state,a=e.strokeStyle,s=e.lineWidth;if(void 0!==a&&void 0!==s){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Z);for(var l=t.getEnds(),f=t.getFlatCoordinates(),u=t.getStride(),g=0,x=0,S=l.length;x<S;++x)g=this.drawFlatCoordinates_(f,g,l[x],u);this.hitDetectionInstructions.push(U),this.endGeometry(i)}},n.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(U),this.reverseHitDetectionInstructions(),this.state=null,c.prototype.finish.call(this)},n.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(U),t.lastStroke=this.coordinates.length),t.lastStroke=0,c.prototype.applyStroke.call(this,t),this.instructions.push(Z)},n}(p);const C=P;var F=E(9182),J=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),lt=function(c){function n(t,i,e,a){return c.call(this,t,i,e,a)||this}return J(n,c),n.prototype.drawFlatCoordinatess_=function(t,i,e,a){var s=this.state,l=void 0!==s.fillStyle,f=void 0!==s.strokeStyle,u=e.length;this.instructions.push(Z),this.hitDetectionInstructions.push(Z);for(var g=0;g<u;++g){var x=e[g],S=this.coordinates.length,L=this.appendFlatLineCoordinates(t,i,x,a,!0,!f),B=[I.MOVE_TO_LINE_TO,S,L];this.instructions.push(B),this.hitDetectionInstructions.push(B),f&&(this.instructions.push(k),this.hitDetectionInstructions.push(k)),i=x}return l&&(this.instructions.push(Q),this.hitDetectionInstructions.push(Q)),f&&(this.instructions.push(U),this.hitDetectionInstructions.push(U)),i},n.prototype.drawCircle=function(t,i){var e=this.state,a=e.fillStyle,s=e.strokeStyle;if(void 0!==a||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,T.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var l=t.getFlatCoordinates(),f=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,f,!1,!1);var g=[I.CIRCLE,u];this.instructions.push(Z,g),this.hitDetectionInstructions.push(Z,g),void 0!==e.fillStyle&&(this.instructions.push(Q),this.hitDetectionInstructions.push(Q)),void 0!==e.strokeStyle&&(this.instructions.push(U),this.hitDetectionInstructions.push(U)),this.endGeometry(i)}},n.prototype.drawPolygon=function(t,i){var e=this.state,a=e.fillStyle,s=e.strokeStyle;if(void 0!==a||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,T.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var l=t.getEnds(),f=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(f,0,l,u),this.endGeometry(i)}},n.prototype.drawMultiPolygon=function(t,i){var e=this.state,a=e.fillStyle,s=e.strokeStyle;if(void 0!==a||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([I.SET_FILL_STYLE,T.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([I.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var l=t.getEndss(),f=t.getOrientedFlatCoordinates(),u=t.getStride(),g=0,x=0,S=l.length;x<S;++x)g=this.drawFlatCoordinatess_(f,g,l[x],u);this.endGeometry(i)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var i=this.coordinates,e=0,a=i.length;e<a;++e)i[e]=(0,F.uZ)(i[e],t);return c.prototype.finish.call(this)},n.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(p);const nt=lt;var _t=E(119);function Ot(c,n,t,i,e){var x,S,L,B,G,j,b,$,ot,a=t,s=t,l=0,f=0,u=t;for(x=t;x<i;x+=e){var pt=n[x],vt=n[x+1];void 0!==B&&($=pt-B,ot=vt-G,L=Math.sqrt($*$+ot*ot),void 0!==j&&(f+=S,Math.acos((j*$+b*ot)/(S*L))>c&&(f>l&&(l=f,a=u,s=x),f=0,u=x-e)),S=L,j=$,b=ot),B=pt,G=vt}return(f+=L)>l?[u,x]:[a,s]}var Wt=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},te=function(c){function n(t,i,e,a){var s=c.call(this,t,i,e,a)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s.declutterImageWithText_=void 0,s}return Wt(n,c),n.prototype.finish=function(){var t=c.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},n.prototype.drawText=function(t,i){var e=this.textFillState_,a=this.textStrokeState_,s=this.textState_;if(""!==this.text_&&s&&(e||a)){var l=this.coordinates,f=l.length,u=t.getType(),g=null,x=t.getStride();if("line"!==s.placement||"LineString"!=u&&"MultiLineString"!=u&&"Polygon"!=u&&"MultiPolygon"!=u){var yt=s.overflow?null:[];switch(u){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),x=2;break;case"Polygon":g=t.getFlatInteriorPoint(),s.overflow||yt.push(g[2]/this.resolution),x=3;break;case"MultiPolygon":var dt=t.getFlatInteriorPoints();g=[];for(B=0,G=dt.length;B<G;B+=3)s.overflow||yt.push(dt[B+2]/this.resolution),g.push(dt[B],dt[B+1]);if(0===g.length)return;x=2}if((ct=this.appendFlatPointCoordinates(g,x))===f)return;if(yt&&(ct-f)/2!=g.length/x){var mt=f/2;yt=yt.filter(function(Mt,Lt){var At=l[2*(mt+Lt)]===g[Lt*x]&&l[2*(mt+Lt)+1]===g[Lt*x+1];return At||--mt,At})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var Tt=s.padding;if(Tt!=T.oB&&(s.scale[0]<0||s.scale[1]<0)){var Rt=s.padding[0],It=s.padding[1],Ct=s.padding[2],Pt=s.padding[3];s.scale[0]<0&&(It=-It,Pt=-Pt),s.scale[1]<0&&(Rt=-Rt,Ct=-Ct),Tt=[Rt,It,Ct,Pt]}var Zt=this.pixelRatio;this.instructions.push([I.DRAW_IMAGE,f,ct,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,Tt==T.oB?T.oB:Tt.map(function(Mt){return Mt*Zt}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,yt]);var Gt=1/Zt;this.hitDetectionInstructions.push([I.DRAW_IMAGE,f,ct,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Gt,Gt],NaN,void 0,this.declutterImageWithText_,Tt,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,yt]),this.endGeometry(i)}else{if(!(0,D.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var S=void 0;if(g=t.getFlatCoordinates(),"LineString"==u)S=[g.length];else if("MultiLineString"==u)S=t.getEnds();else if("Polygon"==u)S=t.getEnds().slice(0,1);else if("MultiPolygon"==u){var L=t.getEndss();S=[];for(var B=0,G=L.length;B<G;++B)S.push(L[B][0])}this.beginGeometry(t,i);for(var j=s.textAlign,b=0,$=void 0,ot=0,pt=S.length;ot<pt;++ot){if(null==j){var vt=Ot(s.maxAngle,g,b,S[ot],x);b=vt[0],$=vt[1]}else $=S[ot];for(var B=b;B<$;B+=x)l.push(g[B],g[B+1]);var ct=l.length;b=S[ot],this.drawChars_(f,ct),f=ct}this.endGeometry(i)}}},n.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,e=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:i.font,textAlign:i.textAlign||T.PH,justify:i.justify,textBaseline:i.textBaseline||T.ru,scale:i.scale});var l=this.fillKey_;e&&(l in this.fillStates||(this.fillStates[l]={fillStyle:e.fillStyle}))},n.prototype.drawChars_=function(t,i){var e=this.textStrokeState_,a=this.textState_,s=this.strokeKey_,l=this.textKey_,f=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,g=Yt[a.textBaseline],x=this.textOffsetY_*u,S=this.text_,L=e?e.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([I.DRAW_CHARS,t,i,g,a.overflow,f,a.maxAngle,u,x,s,L*u,S,l,1]),this.hitDetectionInstructions.push([I.DRAW_CHARS,t,i,g,a.overflow,f,a.maxAngle,1,x,s,L,S,l,1/u])},n.prototype.setTextStyle=function(t,i){var e,a,s;if(t){var l=t.getFill();l?((a=this.textFillState_)||(a={},this.textFillState_=a),a.fillStyle=(0,Y.y)(l.getColor()||T.bL)):(a=null,this.textFillState_=a);var f=t.getStroke();if(f){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var u=f.getLineDash(),g=f.getLineDashOffset(),x=f.getWidth(),S=f.getMiterLimit();s.lineCap=f.getLineCap()||T.mb,s.lineDash=u?u.slice():T.X9,s.lineDashOffset=void 0===g?T.He:g,s.lineJoin=f.getLineJoin()||T.rc,s.lineWidth=void 0===x?T.yC:x,s.miterLimit=void 0===S?T.V4:S,s.strokeStyle=(0,Y.y)(f.getColor()||T.Tx)}else s=null,this.textStrokeState_=s;e=this.textState_;var L=t.getFont()||T.Df;(0,T.Qx)(L);var B=t.getScaleArray();e.overflow=t.getOverflow(),e.font=L,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||T.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||T.oB,e.scale=void 0===B?[1,1]:B;var G=t.getOffsetX(),j=t.getOffsetY(),b=t.getRotateWithView(),$=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===G?0:G,this.textOffsetY_=void 0===j?0:j,this.textRotateWithView_=void 0!==b&&b,this.textRotation_=void 0===$?0:$,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,_t.sq)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=a?"string"==typeof a.fillStyle?a.fillStyle:"|"+(0,_t.sq)(a.fillStyle):""}else this.text_="";this.declutterImageWithText_=i},n}(p),jt={Circle:nt,Default:p,Image:z,LineString:C,Polygon:nt,Text:te},re=function(){function c(n,t,i,e){this.tolerance_=n,this.maxExtent_=t,this.pixelRatio_=e,this.resolution_=i,this.buildersByZIndex_={}}return c.prototype.finish=function(){var n={};for(var t in this.buildersByZIndex_){n[t]=n[t]||{};var i=this.buildersByZIndex_[t];for(var e in i){var a=i[e].finish();n[t][e]=a}}return n},c.prototype.getBuilder=function(n,t){var i=void 0!==n?n.toString():"0",e=this.buildersByZIndex_[i];void 0===e&&(e={},this.buildersByZIndex_[i]=e);var a=e[t];void 0===a&&(a=new(0,jt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),e[t]=a);return a},c}();const fe=re;var ce=E(2121),ve=E(9996),kt=E(483),bt=E(2156),se=E(874);function _e(c,n,t,i,e,a,s,l,f,u,g,x){var S=c[n],L=c[n+1],B=0,G=0,j=0,b=0;function $(){B=S,G=L,S=c[n+=i],L=c[n+1],b+=j,j=Math.sqrt((S-B)*(S-B)+(L-G)*(L-G))}do{$()}while(n<t-i&&b+j<a);for(var ot=0===j?0:(a-b)/j,pt=(0,bt.t7)(B,S,ot),vt=(0,bt.t7)(G,L,ot),ct=n-i,yt=b,dt=a+l*f(u,e,g);n<t-i&&b+j<dt;)$();ot=0===j?0:(dt-b)/j;var Rt,mt=(0,bt.t7)(B,S,ot),Tt=(0,bt.t7)(G,L,ot);if(x){var It=[pt,vt,mt,Tt];(0,se.U1)(It,0,4,2,x,It,It),Rt=It[0]>It[2]}else Rt=pt>mt;var Gt,Ct=Math.PI,Pt=[],Zt=ct+i===n;if(j=0,b=yt,S=c[n=ct],L=c[n+1],Zt){$(),Gt=Math.atan2(L-G,S-B),Rt&&(Gt+=Gt>0?-Ct:Ct);var Dt=(mt+pt)/2,Mt=(Tt+vt)/2;return Pt[0]=[Dt,Mt,(dt-a)/2,Gt,e],Pt}for(var Lt=0,At=(e=e.replace(/\n/g," ")).length;Lt<At;){$();var Xt=Math.atan2(L-G,S-B);if(Rt&&(Xt+=Xt>0?-Ct:Ct),void 0!==Gt){var N=Xt-Gt;if(N+=N>Ct?-2*Ct:N<-Ct?2*Ct:0,Math.abs(N)>s)return null}Gt=Xt;for(var Ht=Lt,Vt=0;Lt<At;++Lt){var de=l*f(u,e[Rt?At-Lt-1:Lt],g);if(n+i<t&&b+j<a+Vt+de/2)break;Vt+=de}if(Lt!==Ht){var Ce=Rt?e.substring(At-Ht,At-Lt):e.substring(Ht,Lt);ot=0===j?0:(a+Vt/2-b)/j;Dt=(0,bt.t7)(B,S,ot),Mt=(0,bt.t7)(G,L,ot);Pt.push([Dt,Mt,Vt/2,Xt,Ce]),a+=Vt}}return Pt}var We=E(3343),oe=(0,D.lJ)(),Jt=[],Kt=[],Qt=[],ee=[];function Ge(c){return c[3].declutterBox}var $e=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function we(c,n){return("start"===n||"end"===n)&&!$e.test(c)&&(n="start"===n?"left":"right"),Yt[n]}function Ze(c,n,t){return t>0&&c.push("\n",""),c.push(n,""),c}var W=function(){function c(n,t,i,e){this.overlaps=i,this.pixelRatio=t,this.resolution=n,this.alignFill_,this.instructions=e.instructions,this.coordinates=e.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,kt.Ue)(),this.hitDetectionInstructions=e.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=e.fillStates||{},this.strokeStates=e.strokeStates||{},this.textStates=e.textStates||{},this.widths_={},this.labels_={}}return c.prototype.createLabel=function(n,t,i,e){var a=n+t+i+e;if(this.labels_[a])return this.labels_[a];var s=e?this.strokeStates[e]:null,l=i?this.fillStates[i]:null,f=this.textStates[t],u=this.pixelRatio,g=[f.scale[0]*u,f.scale[1]*u],x=Array.isArray(n),S=f.justify?Yt[f.justify]:we(Array.isArray(n)?n[0]:n,f.textAlign||T.PH),L=e&&s.lineWidth?s.lineWidth:0,B=x?n:n.split("\n").reduce(Ze,[]),G=(0,T.Zw)(f,B),j=G.width,b=G.height,$=G.widths,ot=G.heights,pt=G.lineWidths,vt=j+L,ct=[],yt=(vt+2)*g[0],dt=(b+L)*g[1],mt={width:yt<0?Math.floor(yt):Math.ceil(yt),height:dt<0?Math.floor(dt):Math.ceil(dt),contextInstructions:ct};((1!=g[0]||1!=g[1])&&ct.push("scale",g),e)&&(ct.push("strokeStyle",s.strokeStyle),ct.push("lineWidth",L),ct.push("lineCap",s.lineCap),ct.push("lineJoin",s.lineJoin),ct.push("miterLimit",s.miterLimit),(ve.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(ct.push("setLineDash",[s.lineDash]),ct.push("lineDashOffset",s.lineDashOffset)));i&&ct.push("fillStyle",l.fillStyle),ct.push("textBaseline","middle"),ct.push("textAlign","center");for(var Lt,Rt=.5-S,It=S*vt+Rt*L,Ct=[],Pt=[],Zt=0,Gt=0,Dt=0,Mt=0,At=0,Xt=B.length;At<Xt;At+=2){var N=B[At];if("\n"!==N){var Ht=B[At+1]||f.font;Ht!==Lt&&(e&&Ct.push("font",Ht),i&&Pt.push("font",Ht),Lt=Ht),Zt=Math.max(Zt,ot[Dt]);var Vt=[N,It+Rt*$[Dt]+S*($[Dt]-pt[Mt]),.5*(L+Zt)+Gt];It+=$[Dt],e&&Ct.push("strokeText",Vt),i&&Pt.push("fillText",Vt),++Dt}else Gt+=Zt,Zt=0,It=S*vt+Rt*L,++Mt}return Array.prototype.push.apply(ct,Ct),Array.prototype.push.apply(ct,Pt),this.labels_[a]=mt,mt},c.prototype.replayTextBackground_=function(n,t,i,e,a,s,l){n.beginPath(),n.moveTo.apply(n,t),n.lineTo.apply(n,i),n.lineTo.apply(n,e),n.lineTo.apply(n,a),n.lineTo.apply(n,t),s&&(this.alignFill_=s[2],this.fill_(n)),l&&(this.setStrokeStyle_(n,l),n.stroke())},c.prototype.calculateImageOrLabelDimensions_=function(n,t,i,e,a,s,l,f,u,g,x,S,L,B,G,j){var mt,b=i-(l*=S[0]),$=e-(f*=S[1]),ot=a+u>n?n-u:a,pt=s+g>t?t-g:s,vt=B[3]+ot*S[0]+B[1],ct=B[0]+pt*S[1]+B[2],yt=b-B[3],dt=$-B[0];return(G||0!==x)&&(Jt[0]=yt,ee[0]=yt,Jt[1]=dt,Kt[1]=dt,Kt[0]=yt+vt,Qt[0]=Kt[0],Qt[1]=dt+ct,ee[1]=Qt[1]),0!==x?(mt=(0,kt.qC)((0,kt.Ue)(),i,e,1,1,x,-i,-e),(0,kt.nn)(mt,Jt),(0,kt.nn)(mt,Kt),(0,kt.nn)(mt,Qt),(0,kt.nn)(mt,ee),(0,D.T9)(Math.min(Jt[0],Kt[0],Qt[0],ee[0]),Math.min(Jt[1],Kt[1],Qt[1],ee[1]),Math.max(Jt[0],Kt[0],Qt[0],ee[0]),Math.max(Jt[1],Kt[1],Qt[1],ee[1]),oe)):(0,D.T9)(Math.min(yt,yt+vt),Math.min(dt,dt+ct),Math.max(yt,yt+vt),Math.max(dt,dt+ct),oe),L&&(b=Math.round(b),$=Math.round($)),{drawImageX:b,drawImageY:$,drawImageW:ot,drawImageH:pt,originX:u,originY:g,declutterBox:{minX:oe[0],minY:oe[1],maxX:oe[2],maxY:oe[3],value:j},canvasTransform:mt,scale:S}},c.prototype.replayImageOrLabel_=function(n,t,i,e,a,s,l){var f=!(!s&&!l),u=e.declutterBox,g=n.canvas,x=l?l[2]*e.scale[0]/2:0;return u.minX-x<=g.width/t&&u.maxX+x>=0&&u.minY-x<=g.height/t&&u.maxY+x>=0&&(f&&this.replayTextBackground_(n,Jt,Kt,Qt,ee,s,l),(0,T._f)(n,e.canvasTransform,a,i,e.originX,e.originY,e.drawImageW,e.drawImageH,e.drawImageX,e.drawImageY,e.scale)),!0},c.prototype.fill_=function(n){if(this.alignFill_){var t=(0,kt.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;n.save(),n.translate(t[0]%i,t[1]%i),n.rotate(this.viewRotation_)}n.fill(),this.alignFill_&&n.restore()},c.prototype.setStrokeStyle_=function(n,t){n.strokeStyle=t[1],n.lineWidth=t[2],n.lineCap=t[3],n.lineJoin=t[4],n.miterLimit=t[5],n.setLineDash&&(n.lineDashOffset=t[7],n.setLineDash(t[6]))},c.prototype.drawLabelWithPointPlacement_=function(n,t,i,e){var a=this.textStates[t],s=this.createLabel(n,t,e,i),l=this.strokeStates[i],f=this.pixelRatio,u=we(Array.isArray(n)?n[0]:n,a.textAlign||T.PH),g=Yt[a.textBaseline||T.ru],x=l&&l.lineWidth?l.lineWidth:0;return{label:s,anchorX:u*(s.width/f-2*a.scale[0])+2*(.5-u)*x,anchorY:g*s.height/f+2*(.5-g)*x}},c.prototype.execute_=function(n,t,i,e,a,s,l,f){var u;this.pixelCoordinates_&&(0,K.fS)(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=(0,se.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,kt.lk)(this.renderedTransform_,i));for(var L,B,G,j,b,$,ot,pt,vt,ct,yt,dt,Mt,Lt,At,Xt,g=0,x=e.length,S=0,mt=0,Tt=0,Rt=null,It=null,Ct=this.coordinateCache_,Pt=this.viewRotation_,Zt=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,Gt={context:n,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Pt},Dt=this.instructions!=e||this.overlaps?0:200;g<x;){var N=e[g];switch(N[0]){case I.BEGIN_GEOMETRY:Mt=N[1],Xt=N[3],Mt.getGeometry()?void 0===l||(0,D.kK)(l,Xt.getExtent())?++g:g=N[2]+1:g=N[2];break;case I.BEGIN_PATH:mt>Dt&&(this.fill_(n),mt=0),Tt>Dt&&(n.stroke(),Tt=0),!mt&&!Tt&&(n.beginPath(),j=NaN,b=NaN),++g;break;case I.CIRCLE:var Vt=u[S=N[1]],ae=u[S+1],ei=u[S+2]-Vt,ii=u[S+3]-ae,ni=Math.sqrt(ei*ei+ii*ii);n.moveTo(Vt+ni,ae),n.arc(Vt,ae,ni,0,2*Math.PI,!0),++g;break;case I.CLOSE_PATH:n.closePath(),++g;break;case I.CUSTOM:S=N[1],L=N[2];var ji=N[3],Vi=N[4],ri=6==N.length?N[5]:void 0;Gt.geometry=ji,Gt.feature=Mt,g in Ct||(Ct[g]=[]);var xe=Ct[g];ri?ri(u,S,L,2,xe):(xe[0]=u[S],xe[1]=u[S+1],xe.length=2),Vi(xe,Gt),++g;break;case I.DRAW_IMAGE:S=N[1],L=N[2],pt=N[3],B=N[4],G=N[5];var Ye=N[6],Ui=N[7],Ki=N[8],Hi=N[9],oi=N[10],Ne=N[11],zi=N[12],De=N[13],ai=N[14],Se=N[15];if(!pt&&N.length>=20){vt=N[19],ct=N[20],yt=N[21],dt=N[22];var je=this.drawLabelWithPointPlacement_(vt,ct,yt,dt);pt=je.label,N[3]=pt;var Ji=N[23];B=(je.anchorX-Ji)*this.pixelRatio,N[4]=B;var bi=N[24];G=(je.anchorY-bi)*this.pixelRatio,N[5]=G,Ye=pt.height,N[6]=Ye,De=pt.width,N[13]=De}var Ve=void 0;N.length>25&&(Ve=N[25]);var Ue=void 0,Le=void 0,Fe=void 0;N.length>17?(Ue=N[16],Le=N[17],Fe=N[18]):(Ue=T.oB,Le=!1,Fe=!1),oi&&Zt?Ne+=Pt:!oi&&!Zt&&(Ne-=Pt);for(var $i=0;S<L;S+=2)if(!(Ve&&Ve[$i++]<De/this.pixelRatio)){var si=[n,t,pt,ne=this.calculateImageOrLabelDimensions_(pt.width,pt.height,u[S],u[S+1],De,Ye,B,G,Ki,Hi,Ne,zi,a,Ue,Le||Fe,Mt),Ui,Le?Rt:null,Fe?It:null];if(f){if("none"===ai)continue;if("obstacle"===ai){f.insert(ne.declutterBox);continue}var Me=void 0,Ke=void 0;if(Se){var Ae=L-S;if(!Se[Ae]){Se[Ae]=si;continue}if(Me=Se[Ae],delete Se[Ae],Ke=Ge(Me),f.collides(Ke))continue}if(f.collides(ne.declutterBox))continue;Me&&(f.insert(Ke),this.replayImageOrLabel_.apply(this,Me)),f.insert(ne.declutterBox)}this.replayImageOrLabel_.apply(this,si)}++g;break;case I.DRAW_CHARS:var hi=N[1],li=N[2],He=N[3],Qi=N[4];dt=N[5];var qi=N[6],ui=N[7],fi=N[8];yt=N[9];var ze=N[10];vt=N[11],ct=N[12];var ci=[N[13],N[13]],Je=this.textStates[ct],Ee=Je.font,Ie=[Je.scale[0]*ui,Je.scale[1]*ui],Oe=void 0;Ee in this.widths_?Oe=this.widths_[Ee]:(Oe={},this.widths_[Ee]=Oe);var di=(0,We.W)(u,hi,li,2),vi=Math.abs(Ie[0])*(0,T.Kd)(Ee,vt,Oe);if(Qi||vi<=di){var tn=this.textStates[ct].textAlign,Te=_e(u,hi,li,2,vt,(di-vi)*Yt[tn],qi,Math.abs(Ie[0]),T.Kd,Ee,Oe,Zt?0:this.viewRotation_);t:if(Te){var Pe=[],ue=void 0,ke=void 0,Be=void 0,zt=void 0,$t=void 0;if(yt)for(ue=0,ke=Te.length;ue<ke;++ue){Be=($t=Te[ue])[4],zt=this.createLabel(Be,ct,"",yt),B=$t[2]+(Ie[0]<0?-ze:ze),G=He*zt.height+2*(.5-He)*ze*Ie[1]/Ie[0]-fi;var ne=this.calculateImageOrLabelDimensions_(zt.width,zt.height,$t[0],$t[1],zt.width,zt.height,B,G,0,0,$t[3],ci,!1,T.oB,!1,Mt);if(f&&f.collides(ne.declutterBox))break t;Pe.push([n,t,zt,ne,1,null,null])}if(dt)for(ue=0,ke=Te.length;ue<ke;++ue){Be=($t=Te[ue])[4],zt=this.createLabel(Be,ct,dt,""),B=$t[2],G=He*zt.height-fi;ne=this.calculateImageOrLabelDimensions_(zt.width,zt.height,$t[0],$t[1],zt.width,zt.height,B,G,0,0,$t[3],ci,!1,T.oB,!1,Mt);if(f&&f.collides(ne.declutterBox))break t;Pe.push([n,t,zt,ne,1,null,null])}f&&f.load(Pe.map(Ge));for(var be=0,nn=Pe.length;be<nn;++be)this.replayImageOrLabel_.apply(this,Pe[be])}}++g;break;case I.END_GEOMETRY:if(void 0!==s){var pi=s(Mt=N[1],Xt);if(pi)return pi}++g;break;case I.FILL:Dt?mt++:this.fill_(n),++g;break;case I.MOVE_TO_LINE_TO:for(S=N[1],L=N[2],Lt=u[S],ot=(At=u[S+1])+.5|0,(($=Lt+.5|0)!==j||ot!==b)&&(n.moveTo(Lt,At),j=$,b=ot),S+=2;S<L;S+=2)$=(Lt=u[S])+.5|0,ot=(At=u[S+1])+.5|0,(S==L-2||$!==j||ot!==b)&&(n.lineTo(Lt,At),j=$,b=ot);++g;break;case I.SET_FILL_STYLE:Rt=N,this.alignFill_=N[2],mt&&(this.fill_(n),mt=0,Tt&&(n.stroke(),Tt=0)),n.fillStyle=N[1],++g;break;case I.SET_STROKE_STYLE:It=N,Tt&&(n.stroke(),Tt=0),this.setStrokeStyle_(n,N),++g;break;case I.STROKE:Dt?Tt++:n.stroke(),++g;break;default:++g}}mt&&this.fill_(n),Tt&&n.stroke()},c.prototype.execute=function(n,t,i,e,a,s){this.viewRotation_=e,this.execute_(n,t,i,this.instructions,a,void 0,void 0,s)},c.prototype.executeHitDetection=function(n,t,i,e,a){return this.viewRotation_=i,this.execute_(n,1,t,this.hitDetectionInstructions,!0,e,a)},c}();const v=W;var r=E(1992),o=["Polygon","Circle","LineString","Image","Text","Default"],h=function(){function c(n,t,i,e,a,s){this.maxExtent_=n,this.overlaps_=e,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,kt.Ue)(),this.createExecutors_(a)}return c.prototype.clip=function(n,t){var i=this.getClipCoords(t);n.beginPath(),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3]),n.lineTo(i[4],i[5]),n.lineTo(i[6],i[7]),n.clip()},c.prototype.createExecutors_=function(n){for(var t in n){var i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);var e=n[t];for(var a in e){var s=e[a];i[a]=new v(this.resolution_,this.pixelRatio_,this.overlaps_,s)}}},c.prototype.hasExecutors=function(n){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],e=0,a=n.length;e<a;++e)if(n[e]in i)return!0;return!1},c.prototype.forEachFeatureAtCoordinate=function(n,t,i,e,a,s){var l=2*(e=Math.round(e))+1,f=(0,kt.qC)(this.hitDetectionTransform_,e+.5,e+.5,1/t,-1/t,-i,-n[0],-n[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=(0,r.E4)(l,l));var x,g=this.hitDetectionContext_;g.canvas.width!==l||g.canvas.height!==l?(g.canvas.width=l,g.canvas.height=l):u||g.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(x=(0,D.lJ)(),(0,D.Wj)(x,n),(0,D.f3)(x,t*(this.renderBuffer_+e),x));var L,S=function w(c){if(void 0!==d[c])return d[c];for(var n=2*c+1,t=c*c,i=new Array(t+1),e=0;e<=c;++e)for(var a=0;a<=c;++a){var s=e*e+a*a;if(s>t)break;var l=i[s];l||(l=[],i[s]=l),l.push(4*((c+e)*n+(c+a))+3),e>0&&l.push(4*((c-e)*n+(c+a))+3),a>0&&(l.push(4*((c+e)*n+(c-a))+3),e>0&&l.push(4*((c-e)*n+(c-a))+3))}for(var f=[],u=(e=0,i.length);e<u;++e)i[e]&&f.push.apply(f,i[e]);return d[c]=f,f}(e);function B(ct,yt){for(var dt=g.getImageData(0,0,l,l).data,mt=0,Tt=S.length;mt<Tt;mt++)if(dt[S[mt]]>0){if(!s||"Image"!==L&&"Text"!==L||-1!==s.indexOf(ct)){var Rt=(S[mt]-3)/4,It=e-Rt%l,Ct=e-(Rt/l|0),Pt=a(ct,yt,It*It+Ct*Ct);if(Pt)return Pt}g.clearRect(0,0,l,l);break}}var j,b,$,ot,pt,G=Object.keys(this.executorsByZIndex_).map(Number);for(G.sort(K.kK),j=G.length-1;j>=0;--j){var vt=G[j].toString();for($=this.executorsByZIndex_[vt],b=o.length-1;b>=0;--b)if(void 0!==(ot=$[L=o[b]])&&(pt=ot.executeHitDetection(g,f,i,B,x)))return pt}},c.prototype.getClipCoords=function(n){var t=this.maxExtent_;if(!t)return null;var i=t[0],e=t[1],a=t[2],s=t[3],l=[i,e,i,s,a,s,a,e];return(0,se.vT)(l,0,8,2,n,l),l},c.prototype.isEmpty=function(){return(0,rt.xb)(this.executorsByZIndex_)},c.prototype.execute=function(n,t,i,e,a,s,l){var f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(K.kK),this.maxExtent_&&(n.save(),this.clip(n,i));var g,x,S,L,B,G,u=s||o;for(l&&f.reverse(),g=0,x=f.length;g<x;++g){var j=f[g].toString();for(B=this.executorsByZIndex_[j],S=0,L=u.length;S<L;++S){void 0!==(G=B[u[S]])&&G.execute(n,t,i,e,a,l)}}this.maxExtent_&&n.restore()},c}(),d={};const A=h;var H=E(8587),ut=E(9235),ft=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Et=function(c){function n(t,i,e,a,s,l,f){var u=c.call(this)||this;return u.context_=t,u.pixelRatio_=i,u.extent_=e,u.transform_=a,u.viewRotation_=s,u.squaredTolerance_=l,u.userTransform_=f,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=(0,kt.Ue)(),u}return ft(n,c),n.prototype.drawImages_=function(t,i,e,a){if(this.image_){var s=(0,se.vT)(t,i,e,a,this.transform_,this.pixelCoordinates_),l=this.context_,f=this.tmpLocalTransform_,u=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=u*this.imageOpacity_);var g=this.imageRotation_;this.imageRotateWithView_&&(g+=this.viewRotation_);for(var x=0,S=s.length;x<S;x+=2){var L=s[x]-this.imageAnchorX_,B=s[x+1]-this.imageAnchorY_;if(0!==g||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var G=L+this.imageAnchorX_,j=B+this.imageAnchorY_;(0,kt.qC)(f,G,j,1,1,g,-G,-j),l.setTransform.apply(l,f),l.translate(G,j),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,L,B,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(l.globalAlpha=u)}},n.prototype.drawText_=function(t,i,e,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=(0,se.vT)(t,i,e,a,this.transform_,this.pixelCoordinates_),l=this.context_,f=this.textRotation_;for(this.textRotateWithView_&&(f+=this.viewRotation_);i<e;i+=a){var u=s[i]+this.textOffsetX_,g=s[i+1]+this.textOffsetY_;if(0!==f||1!=this.textScale_[0]||1!=this.textScale_[1]){var x=(0,kt.qC)(this.tmpLocalTransform_,u,g,1,1,f,-u,-g);l.setTransform.apply(l,x),l.translate(u,g),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&l.strokeText(this.text_,u,g),this.textFillState_&&l.fillText(this.text_,u,g)}}},n.prototype.moveToLineTo_=function(t,i,e,a,s){var l=this.context_,f=(0,se.vT)(t,i,e,a,this.transform_,this.pixelCoordinates_);l.moveTo(f[0],f[1]);var u=f.length;s&&(u-=2);for(var g=2;g<u;g+=2)l.lineTo(f[g],f[g+1]);return s&&l.closePath(),e},n.prototype.drawRings_=function(t,i,e,a){for(var s=0,l=e.length;s<l;++s)i=this.moveToLineTo_(t,i,e[s],a,!0);return i},n.prototype.drawCircle=function(t){if((0,D.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=(0,ut.Kr)(t,this.transform_,this.pixelCoordinates_),e=i[2]-i[0],a=i[3]-i[1],s=Math.sqrt(e*e+a*a),l=this.context_;l.beginPath(),l.arc(i[0],i[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.transform_=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},n.prototype.drawFeature=function(t,i){var e=i.getGeometryFunction()(t);!e||!(0,D.kK)(this.extent_,e.getExtent())||(this.setStyle(i),this.drawGeometry(e))},n.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),e=0,a=i.length;e<a;++e)this.drawGeometry(i[e])},n.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),""!==this.text_&&this.drawText_(i,0,i.length,e)},n.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),""!==this.text_&&this.drawText_(i,0,i.length,e)},n.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,D.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(e,0,e.length,t.getStride(),!1),i.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if((0,D.kK)(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,a=t.getFlatCoordinates(),s=0,l=t.getEnds(),f=t.getStride();e.beginPath();for(var u=0,g=l.length;u<g;++u)s=this.moveToLineTo_(a,s,l[u],f,!1);e.stroke()}if(""!==this.text_){var x=t.getFlatMidpoints();this.drawText_(x,0,x.length,2)}}},n.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,D.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,D.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getOrientedFlatCoordinates(),a=0,s=t.getEndss(),l=t.getStride();i.beginPath();for(var f=0,u=s.length;f<u;++f){var g=s[f];a=this.drawRings_(e,a,g,l)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var x=t.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}},n.prototype.setContextFillState_=function(t){var i=this.context_,e=this.contextFillState_;e?e.fillStyle!=t.fillStyle&&(e.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},n.prototype.setContextStrokeState_=function(t){var i=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=t.lineCap&&(e.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&((0,K.fS)(e.lineDash,t.lineDash)||i.setLineDash(e.lineDash=t.lineDash),e.lineDashOffset!=t.lineDashOffset&&(e.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),e.lineJoin!=t.lineJoin&&(e.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),e.lineWidth!=t.lineWidth&&(e.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),e.miterLimit!=t.miterLimit&&(e.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),e.strokeStyle!=t.strokeStyle&&(e.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.setContextTextState_=function(t){var i=this.context_,e=this.contextTextState_,a=t.textAlign?t.textAlign:T.PH;e?(e.font!=t.font&&(e.font=t.font,i.font=t.font),e.textAlign!=a&&(e.textAlign=a,i.textAlign=a),e.textBaseline!=t.textBaseline&&(e.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,i){var e=this;if(t){var a=t.getColor();this.fillState_={fillStyle:(0,Y.y)(a||T.bL)}}else this.fillState_=null;if(i){var s=i.getColor(),l=i.getLineCap(),f=i.getLineDash(),u=i.getLineDashOffset(),g=i.getLineJoin(),x=i.getWidth(),S=i.getMiterLimit(),L=f||T.X9;this.strokeState_={lineCap:void 0!==l?l:T.mb,lineDash:1===this.pixelRatio_?L:L.map(function(B){return B*e.pixelRatio_}),lineDashOffset:(u||T.He)*this.pixelRatio_,lineJoin:void 0!==g?g:T.rc,lineWidth:(void 0!==x?x:T.yC)*this.pixelRatio_,miterLimit:void 0!==S?S:T.V4,strokeStyle:(0,Y.y)(s||T.Tx)}}else this.strokeState_=null},n.prototype.setImageStyle=function(t){var i;if(t&&(i=t.getSize())){var e=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=e[0]*this.pixelRatio_,this.imageAnchorY_=e[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_}else this.image_=null},n.prototype.setTextStyle=function(t){if(t){var i=t.getFill();if(i){var e=i.getColor();this.textFillState_={fillStyle:(0,Y.y)(e||T.bL)}}else this.textFillState_=null;var a=t.getStroke();if(a){var s=a.getColor(),l=a.getLineCap(),f=a.getLineDash(),u=a.getLineDashOffset(),g=a.getLineJoin(),x=a.getWidth(),S=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:T.mb,lineDash:f||T.X9,lineDashOffset:u||T.He,lineJoin:void 0!==g?g:T.rc,lineWidth:void 0!==x?x:T.yC,miterLimit:void 0!==S?S:T.V4,strokeStyle:(0,Y.y)(s||T.Tx)}}else this.textStrokeState_=null;var L=t.getFont(),B=t.getOffsetX(),G=t.getOffsetY(),j=t.getRotateWithView(),b=t.getRotation(),$=t.getScaleArray(),ot=t.getText(),pt=t.getTextAlign(),vt=t.getTextBaseline();this.textState_={font:void 0!==L?L:T.Df,textAlign:void 0!==pt?pt:T.PH,textBaseline:void 0!==vt?vt:T.ru},this.text_=void 0!==ot?Array.isArray(ot)?ot.reduce(function(ct,yt,dt){return ct+(dt%2?" ":yt)},""):ot:"",this.textOffsetX_=void 0!==B?this.pixelRatio_*B:0,this.textOffsetY_=void 0!==G?this.pixelRatio_*G:0,this.textRotateWithView_=void 0!==j&&j,this.textRotation_=void 0!==b?b:0,this.textScale_=[this.pixelRatio_*$[0],this.pixelRatio_*$[1]]}else this.text_=""},n}(R);const Ft=Et;var Bt=E(9972),St=E(521),qt=E(6398),he=E(3783),pe=E(1911),le=E(8007),ye=E(2956),Re=E(4907),gi=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),me=null,_i=function(c){function n(t,i,e,a,s,l){var f=c.call(this)||this;return f.hitDetectionImage_=null,f.image_=t||new Image,null!==a&&(f.image_.crossOrigin=a),f.canvas_={},f.color_=l,f.unlisten_=null,f.imageState_=s,f.size_=e,f.src_=i,f.tainted_,f}return gi(n,c),n.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===St.Z.LOADED){me||(me=(0,r.E4)(1,1)),me.drawImage(this.image_,0,0);try{me.getImageData(0,0,1,1),this.tainted_=!1}catch{me=null,this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Bt.Z.CHANGE)},n.prototype.handleImageError_=function(){this.imageState_=St.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=St.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},n.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],e=(0,r.E4)(t,i);e.fillRect(0,0,t,i),this.hitDetectionImage_=e.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(this.imageState_==St.Z.IDLE){this.imageState_=St.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,Re.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===St.Z.LOADED){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var e=i.getContext("2d");if(e.scale(t,t),e.drawImage(this.image_,0,0),e.globalCompositeOperation="multiply","multiply"===e.globalCompositeOperation||this.isTainted_())e.fillStyle=(0,he.XC)(this.color_),e.fillRect(0,0,i.width/t,i.height/t),e.globalCompositeOperation="destination-in",e.drawImage(this.image_,0,0);else{for(var a=e.getImageData(0,0,i.width,i.height),s=a.data,l=this.color_[0]/255,f=this.color_[1]/255,u=this.color_[2]/255,g=this.color_[3],x=0,S=s.length;x<S;x+=4)s[x]*=l,s[x+1]*=f,s[x+2]*=u,s[x+3]*=g;e.putImageData(a,0,0)}}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(le.Z);var mi=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ci=function(c){function n(t){var i=this,e=t||{},a=void 0!==e.opacity?e.opacity:1,s=void 0!==e.rotation?e.rotation:0,l=void 0!==e.scale?e.scale:1,f=void 0!==e.rotateWithView&&e.rotateWithView;(i=c.call(this,{opacity:a,rotation:s,scale:l,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:f,declutterMode:e.declutterMode})||this).anchor_=void 0!==e.anchor?e.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",i.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",i.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",i.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var u=void 0!==e.img?e.img:null;i.imgSize_=e.imgSize;var g=e.src;(0,pe.h)(!(void 0!==g&&u),4),(0,pe.h)(!u||u&&i.imgSize_,5),(void 0===g||0===g.length)&&u&&(g=u.src||(0,_t.sq)(u)),(0,pe.h)(void 0!==g&&g.length>0,6);var x=void 0!==e.src?St.Z.IDLE:St.Z.LOADED;return i.color_=void 0!==e.color?(0,he._2)(e.color):null,i.iconImage_=function yi(c,n,t,i,e,a){var s=ye.c.get(n,i,a);return s||(s=new _i(c,n,t,i,e,a),ye.c.set(n,i,a,s)),s}(u,g,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,x,i.color_),i.offset_=void 0!==e.offset?e.offset:[0,0],i.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",i.origin_=null,i.size_=void 0!==e.size?e.size:null,i}return mi(n,c),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},n.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var i=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!i)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=i[0]),"fraction"==this.anchorYUnits_&&(t[1]*=i[1])}if("top-left"!=this.anchorOrigin_){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+i[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}var e=this.getDisplacement();return[t[0]-e[0],t[1]+e[1]]},n.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},n.prototype.getColor=function(){return this.color_},n.prototype.getImage=function(t){return this.iconImage_.getImage(t)},n.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.iconImage_.getSize()},n.prototype.getImageState=function(){return this.iconImage_.getImageState()},n.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=e[0]-i[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_},n.prototype.getSrc=function(){return this.iconImage_.getSrc()},n.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},n.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Bt.Z.CHANGE,t)},n.prototype.load=function(){this.iconImage_.load()},n.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Bt.Z.CHANGE,t)},n}(qt.Z);const xi=Ci;var ie=.5;var Qe={Point:function Mi(c,n,t,i,e){var l,a=t.getImage(),s=t.getText();if(a){if(a.getImageState()!=St.Z.LOADED)return;var f=c;if(e){var u=a.getDeclutterMode();if("none"!==u)if(f=e,"obstacle"===u){var g=c.getBuilder(t.getZIndex(),"Image");g.setImageStyle(a,l),g.drawPoint(n,i)}else s&&s.getText()&&(l={})}var x=f.getBuilder(t.getZIndex(),"Image");x.setImageStyle(a,l),x.drawPoint(n,i)}if(s&&s.getText()){var S=c;e&&(S=e);var L=S.getBuilder(t.getZIndex(),"Text");L.setTextStyle(s,l),L.drawText(n,i)}},LineString:function Di(c,n,t,i,e){var a=t.getStroke();if(a){var s=c.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawLineString(n,i)}var l=t.getText();if(l&&l.getText()){var f=(e||c).getBuilder(t.getZIndex(),"Text");f.setTextStyle(l),f.drawText(n,i)}},Polygon:function ki(c,n,t,i,e){var a=t.getFill(),s=t.getStroke();if(a||s){var l=c.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawPolygon(n,i)}var f=t.getText();if(f&&f.getText()){var u=(e||c).getBuilder(t.getZIndex(),"Text");u.setTextStyle(f),u.drawText(n,i)}},MultiPoint:function Ai(c,n,t,i,e){var l,a=t.getImage(),s=t.getText();if(a){if(a.getImageState()!=St.Z.LOADED)return;var f=c;if(e){var u=a.getDeclutterMode();if("none"!==u)if(f=e,"obstacle"===u){var g=c.getBuilder(t.getZIndex(),"Image");g.setImageStyle(a,l),g.drawMultiPoint(n,i)}else s&&s.getText()&&(l={})}var x=f.getBuilder(t.getZIndex(),"Image");x.setImageStyle(a,l),x.drawMultiPoint(n,i)}if(s&&s.getText()){var S=c;e&&(S=e);var L=S.getBuilder(t.getZIndex(),"Text");L.setTextStyle(s,l),L.drawText(n,i)}},MultiLineString:function Li(c,n,t,i,e){var a=t.getStroke();if(a){var s=c.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawMultiLineString(n,i)}var l=t.getText();if(l&&l.getText()){var f=(e||c).getBuilder(t.getZIndex(),"Text");f.setTextStyle(l),f.drawText(n,i)}},MultiPolygon:function Fi(c,n,t,i,e){var a=t.getFill(),s=t.getStroke();if(s||a){var l=c.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawMultiPolygon(n,i)}var f=t.getText();if(f&&f.getText()){var u=(e||c).getBuilder(t.getZIndex(),"Text");u.setTextStyle(f),u.drawText(n,i)}},GeometryCollection:function Ri(c,n,t,i,e){var s,l,a=n.getGeometriesArray();for(s=0,l=a.length;s<l;++s){(0,Qe[a[s].getType()])(c,a[s],t,i,e)}},Circle:function Pi(c,n,t,i,e){var a=t.getFill(),s=t.getStroke();if(a||s){var l=c.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(a,s),l.drawCircle(n,i)}var f=t.getText();if(f&&f.getText()){var u=(e||c).getBuilder(t.getZIndex(),"Text");u.setTextStyle(f),u.drawText(n,i)}}};function Oi(c,n){return parseInt((0,_t.sq)(c),10)-parseInt((0,_t.sq)(n),10)}function Xe(c,n){return.5*c/n}function qe(c,n,t,i,e,a,s){var l=!1,f=t.getImage();if(f){var u=f.getImageState();u==St.Z.LOADED||u==St.Z.ERROR?f.unlistenImageChange(e):(u==St.Z.IDLE&&f.load(),f.listenImageChange(e),l=!0)}return function wi(c,n,t,i,e,a){var s=t.getGeometryFunction()(n);if(s){var l=s.simplifyTransformed(i,e);if(t.getRenderer())ti(c,l,t,n);else(0,Qe[l.getType()])(c,l,t,n,a)}}(c,n,t,i,a,s),l}function ti(c,n,t,i){if("GeometryCollection"!=n.getType())c.getBuilder(t.getZIndex(),"Default").drawCustom(n,i,t.getRenderer(),t.getHitDetectionRenderer());else for(var e=n.getGeometries(),a=0,s=e.length;a<s;++a)ti(c,e[a],t,i)}var ge=E(1274),Bi=E(3481),Wi=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Gi=function(c){function n(t){var i=c.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=(0,D.lJ)(),i.wrappedRenderedExtent_=(0,D.lJ)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.compositionContext_=null,i.opacity_=1,i}return Wi(n,c),n.prototype.renderWorlds=function(t,i,e){var a=i.extent,s=i.viewState,l=s.center,f=s.resolution,u=s.projection,g=s.rotation,x=u.getExtent(),S=this.getLayer().getSource(),L=i.pixelRatio,B=i.viewHints,G=!(B[H.Z.ANIMATING]||B[H.Z.INTERACTING]),j=this.compositionContext_,b=Math.round(i.size[0]*L),$=Math.round(i.size[1]*L),ot=S.getWrapX()&&u.canWrapX(),pt=ot?(0,D.dz)(x):null,vt=ot?Math.ceil((a[2]-x[2])/pt)+1:1,ct=ot?Math.floor((a[0]-x[0])/pt):0;do{var yt=this.getRenderTransform(l,f,g,L,b,$,ct*pt);t.execute(j,1,yt,g,G,void 0,e)}while(++ct<vt)},n.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var t=(0,r.E4)(this.context.canvas.width,this.context.canvas.height,ce.r);this.compositionContext_=t}else this.compositionContext_=this.context},n.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,r.jy)(this.compositionContext_),ce.r.push(this.compositionContext_.canvas),this.compositionContext_=null}},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},n.prototype.renderFrame=function(t,i){var e=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];(0,kt.n3)(this.pixelTransform,1/e,1/e),(0,kt.nb)(this.inversePixelTransform,this.pixelTransform);var s=(0,kt.BB)(this.pixelTransform);this.useContainer(i,s,this.getBackground(t));var l=this.context,f=l.canvas,u=this.replayGroup_,g=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!g||g.isEmpty()))return null;var x=Math.round(t.size[0]*e),S=Math.round(t.size[1]*e);f.width!=x||f.height!=S?(f.width=x,f.height=S,f.style.transform!==s&&(f.style.transform=s)):this.containerReused||l.clearRect(0,0,x,S),this.preRender(l,t);var L=t.viewState,B=L.projection;this.opacity_=a.opacity,this.setupCompositionContext_();var G=!1,j=!0;if(a.extent&&this.clipping){var b=(0,ge.dY)(a.extent,B);(G=(j=(0,D.kK)(b,t.extent))&&!(0,D.r4)(b,t.extent))&&this.clipUnrotated(this.compositionContext_,t,b)}return j&&this.renderWorlds(u,t),G&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(l,t),this.renderedRotation_!==L.rotation&&(this.renderedRotation_=L.rotation,this.hitDetectionImageData_=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var e=[this.context.canvas.width,this.context.canvas.height];(0,kt.nn)(this.pixelTransform,e);var a=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,f=this.renderedProjection_,u=this.wrappedRenderedExtent_,g=this.getLayer(),x=[],S=e[0]*ie,L=e[1]*ie;x.push(this.getRenderTransform(a,s,l,ie,S,L,0).slice());var B=g.getSource(),G=f.getExtent();if(B.getWrapX()&&f.canWrapX()&&!(0,D.r4)(G,u)){for(var j=u[0],b=(0,D.dz)(G),$=0,ot=void 0;j<G[0];)ot=b*--$,x.push(this.getRenderTransform(a,s,l,ie,S,L,ot).slice()),j+=b;for($=0,j=u[2];j>G[2];)ot=b*++$,x.push(this.getRenderTransform(a,s,l,ie,S,L,ot).slice()),j-=b}this.hitDetectionImageData_=function Si(c,n,t,i,e,a,s){var l=c[0]*ie,f=c[1]*ie,u=(0,r.E4)(l,f);u.imageSmoothingEnabled=!1;for(var g=u.canvas,x=new Ft(u,ie,e,null,s),S=t.length,L=Math.floor(16777215/S),B={},G=1;G<=S;++G){var j=t[G-1],b=j.getStyleFunction()||i;if(i){var $=b(j,a);if($){Array.isArray($)||($=[$]);for(var pt="#"+("000000"+(G*L).toString(16)).slice(-6),vt=0,ct=$.length;vt<ct;++vt){var yt=$[vt],dt=yt.getGeometryFunction()(j);if(dt&&(0,D.kK)(e,dt.getExtent())){var mt=yt.clone(),Tt=mt.getFill();Tt&&Tt.setColor(pt);var Rt=mt.getStroke();Rt&&(Rt.setColor(pt),Rt.setLineDash(null)),mt.setText(void 0);var It=yt.getImage();if(It&&0!==It.getOpacity()){var Ct=It.getImageSize();if(!Ct)continue;var Pt=(0,r.E4)(Ct[0],Ct[1],void 0,{alpha:!1}),Zt=Pt.canvas;Pt.fillStyle=pt,Pt.fillRect(0,0,Zt.width,Zt.height),mt.setImage(new xi({img:Zt,imgSize:Ct,anchor:It.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:It.getOrigin(),opacity:1,size:It.getSize(),scale:It.getScale(),rotation:It.getRotation(),rotateWithView:It.getRotateWithView()}))}var Gt=mt.getZIndex()||0;(Dt=B[Gt])||(Dt={},B[Gt]=Dt,Dt.Polygon=[],Dt.Circle=[],Dt.LineString=[],Dt.Point=[]),Dt[dt.getType().replace("Multi","")].push(dt,mt)}}}}}for(var Mt=Object.keys(B).map(Number).sort(K.kK),Lt=(G=0,Mt.length);G<Lt;++G){var Dt=B[Mt[G]];for(var At in Dt){var Xt=Dt[At];for(vt=0,ct=Xt.length;vt<ct;vt+=2){x.setStyle(Xt[vt+1]);for(var N=0,Ht=n.length;N<Ht;++N)x.setTransform(n[N]),x.drawGeometry(Xt[vt])}}}return u.getImageData(0,0,g.width,g.height)}(e,x,this.renderedFeatures_,g.getStyleFunction(),u,s,l)}i(function Ei(c,n,t){var i=[];if(t){var e=Math.floor(Math.round(c[0])*ie),a=Math.floor(Math.round(c[1])*ie),s=4*((0,bt.uZ)(e,0,t.width-1)+(0,bt.uZ)(a,0,t.height-1)*t.width),l=t.data[s],f=t.data[s+1],g=t.data[s+2]+256*(f+256*l),x=Math.floor(16777215/n.length);g&&g%x==0&&i.push(n[g/x-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,i,e,a,s){var l=this;if(this.replayGroup_){var L,f=i.viewState.resolution,u=i.viewState.rotation,g=this.getLayer(),x={},S=function(G,j,b){var $=(0,_t.sq)(G),ot=x[$];if(ot){if(!0!==ot&&b<ot.distanceSq){if(0===b)return x[$]=!0,s.splice(s.lastIndexOf(ot),1),a(G,g,j);ot.geometry=j,ot.distanceSq=b}}else{if(0===b)return x[$]=!0,a(G,g,j);s.push(x[$]={feature:G,layer:g,geometry:j,distanceSq:b,callback:a})}},B=[this.replayGroup_];return this.declutterExecutorGroup&&B.push(this.declutterExecutorGroup),B.some(function(G){return L=G.forEachFeatureAtCoordinate(t,f,u,e,S,G===l.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(j){return j.value}):null)}),L}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},n.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var i=this.getLayer(),e=i.getSource();if(!e)return!1;var a=t.viewHints[H.Z.ANIMATING],s=t.viewHints[H.Z.INTERACTING],l=i.getUpdateWhileAnimating(),f=i.getUpdateWhileInteracting();if(this.ready&&!l&&a||!f&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,g=t.viewState,x=g.projection,S=g.resolution,L=t.pixelRatio,B=i.getRevision(),G=i.getRenderBuffer(),j=i.getRenderOrder();void 0===j&&(j=Oi);var b=g.center.slice(),$=(0,D.f3)(u,G*S),ot=$.slice(),pt=[$.slice()],vt=x.getExtent();if(e.getWrapX()&&x.canWrapX()&&!(0,D.r4)(vt,t.extent)){var ct=(0,D.dz)(vt),yt=Math.max((0,D.dz)($)/2,ct);$[0]=vt[0]-yt,$[2]=vt[2]+yt,(0,Bi.Cf)(b,x);var dt=(0,D.Cf)(pt[0],x);dt[0]<vt[0]&&dt[2]<vt[2]?pt.push([dt[0]+ct,dt[1],dt[2]+ct,dt[3]]):dt[0]>vt[0]&&dt[2]>vt[2]&&pt.push([dt[0]-ct,dt[1],dt[2]-ct,dt[3]])}if(this.ready&&this.renderedResolution_==S&&this.renderedRevision_==B&&this.renderedRenderOrder_==j&&(0,D.r4)(this.wrappedRenderedExtent_,$))return(0,K.fS)(this.renderedExtent_,ot)||(this.hitDetectionImageData_=null,this.renderedExtent_=ot),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var Tt,mt=new fe(Xe(S,L),$,S,L);this.getLayer().getDeclutter()&&(Tt=new fe(Xe(S,L),$,S,L));var It,Rt=(0,ge.Cs)();if(Rt){for(var Ct=0,Pt=pt.length;Ct<Pt;++Ct){var Zt=pt[Ct],Gt=(0,ge.Fj)(Zt,x);e.loadFeatures(Gt,(0,ge.on)(S,x),Rt)}It=(0,ge.WO)(Rt,x)}else for(Ct=0,Pt=pt.length;Ct<Pt;++Ct)e.loadFeatures(pt[Ct],S,x);var Dt=function Ti(c,n){var t=Xe(c,n);return t*t}(S,L),Mt=!0,Lt=function(Vt){var ae,de=Vt.getStyleFunction()||i.getStyleFunction();if(de&&(ae=de(Vt,S)),ae){var Ce=this.renderFeature(Vt,Dt,ae,mt,It,Tt);Mt=Mt&&!Ce}}.bind(this),At=(0,ge.Fj)($,x),Xt=e.getFeaturesInExtent(At);j&&Xt.sort(j);for(Ct=0,Pt=Xt.length;Ct<Pt;++Ct)Lt(Xt[Ct]);this.renderedFeatures_=Xt,this.ready=Mt;var N=mt.finish(),Ht=new A($,S,L,e.getOverlaps(),N,i.getRenderBuffer());return Tt&&(this.declutterExecutorGroup=new A($,S,L,e.getOverlaps(),Tt.finish(),i.getRenderBuffer())),this.renderedResolution_=S,this.renderedRevision_=B,this.renderedRenderOrder_=j,this.renderedExtent_=ot,this.wrappedRenderedExtent_=$,this.renderedCenter_=b,this.renderedProjection_=x,this.replayGroup_=Ht,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,i,e,a,s,l){if(!e)return!1;var f=!1;if(Array.isArray(e))for(var u=0,g=e.length;u<g;++u)f=qe(a,t,e[u],i,this.boundHandleStyleImageChange_,s,l)||f;else f=qe(a,t,e,i,this.boundHandleStyleImageChange_,s,l);return f},n}(ce.Z);const Zi=Gi;var Xi=function(){var c=function(n,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yi=function(c){function n(t){return c.call(this,t)||this}return Xi(n,c),n.prototype.createRenderer=function(){return new Zi(this)},n}(V);const Ni=Yi},5947:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>tt});var gt=E(2815),st=E(9889),rt=E(8214),at=E(9972),et=E(4587),it=E(2909),xt=E(4702),V=E(4412),q=E(1345);E(1274);function U(z,X){return[[-1/0,-1/0,1/0,1/0]]}var I=E(1911),_=E(760),m=E(2456),R=E(119),Y=E(9466),D=E(1729),T=!1;function ht(z,X){return function(P,C,F,J,lt){var nt=this;!function K(z,X,P,C,F,J,lt){var nt=new XMLHttpRequest;nt.open("GET","function"==typeof z?z(P,C,F):z,!0),"arraybuffer"==X.getType()&&(nt.responseType="arraybuffer"),nt.withCredentials=T,nt.onload=function(_t){if(!nt.status||nt.status>=200&&nt.status<300){var Ot=X.getType(),Wt=void 0;"json"==Ot||"text"==Ot?Wt=nt.responseText:"xml"==Ot?(Wt=nt.responseXML)||(Wt=(new DOMParser).parseFromString(nt.responseText,"application/xml")):"arraybuffer"==Ot&&(Wt=nt.response),Wt?J(X.readFeatures(Wt,{extent:P,featureProjection:F}),X.readProjection(Wt)):lt()}else lt()},nt.onerror=lt,nt.send()}(z,X,P,C,F,function(_t,Ot){nt.addFeatures(_t),void 0!==J&&J(_t)},lt||q.Zn)}}var z,O=(z=function(X,P){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,F){C.__proto__=F}||function(C,F){for(var J in F)Object.prototype.hasOwnProperty.call(F,J)&&(C[J]=F[J])})(X,P)},function(X,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function C(){this.constructor=X}z(X,P),X.prototype=null===P?Object.create(P):(C.prototype=P.prototype,new C)}),p=function(z){function X(P,C,F){var J=z.call(this,P)||this;return J.feature=C,J.features=F,J}return O(X,z),X}(rt.ZP),y=function(z){function X(P){var C=this,F=P||{};(C=z.call(this,{attributions:F.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===F.wrapX||F.wrapX})||this).on,C.once,C.un,C.loader_=q.Zn,C.format_=F.format,C.overlaps_=void 0===F.overlaps||F.overlaps,C.url_=F.url,void 0!==F.loader?C.loader_=F.loader:void 0!==C.url_&&((0,I.h)(C.format_,7),C.loader_=ht(C.url_,C.format_)),C.strategy_=void 0!==F.strategy?F.strategy:U;var lt,nt,J=void 0===F.useSpatialIndex||F.useSpatialIndex;return C.featuresRtree_=J?new it.Z:null,C.loadedExtentsRtree_=new it.Z,C.loadingExtentsCount_=0,C.nullGeometryFeatures_={},C.idIndex_={},C.uidIndex_={},C.featureChangeKeys_={},C.featuresCollection_=null,Array.isArray(F.features)?nt=F.features:F.features&&(nt=(lt=F.features).getArray()),!J&&void 0===lt&&(lt=new gt.Z(nt)),void 0!==nt&&C.addFeaturesInternal(nt),void 0!==lt&&C.bindFeaturesCollection_(lt),C}return O(X,z),X.prototype.addFeature=function(P){this.addFeatureInternal(P),this.changed()},X.prototype.addFeatureInternal=function(P){var C=(0,R.sq)(P);if(this.addToIndex_(C,P)){this.setupChangeEvents_(C,P);var F=P.getGeometry();if(F){var J=F.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(J,P)}else this.nullGeometryFeatures_[C]=P;this.dispatchEvent(new p(V.Z.ADDFEATURE,P))}else this.featuresCollection_&&this.featuresCollection_.remove(P)},X.prototype.setupChangeEvents_=function(P,C){this.featureChangeKeys_[P]=[(0,D.oL)(C,at.Z.CHANGE,this.handleFeatureChange_,this),(0,D.oL)(C,et.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},X.prototype.addToIndex_=function(P,C){var F=!0,J=C.getId();return void 0!==J&&(J.toString()in this.idIndex_?F=!1:this.idIndex_[J.toString()]=C),F&&((0,I.h)(!(P in this.uidIndex_),30),this.uidIndex_[P]=C),F},X.prototype.addFeatures=function(P){this.addFeaturesInternal(P),this.changed()},X.prototype.addFeaturesInternal=function(P){for(var C=[],F=[],J=[],lt=0,nt=P.length;lt<nt;lt++){var _t=P[lt],Ot=(0,R.sq)(_t);this.addToIndex_(Ot,_t)&&F.push(_t)}lt=0;for(var Wt=F.length;lt<Wt;lt++){_t=F[lt],Ot=(0,R.sq)(_t);this.setupChangeEvents_(Ot,_t);var Yt=_t.getGeometry();if(Yt){var te=Yt.getExtent();C.push(te),J.push(_t)}else this.nullGeometryFeatures_[Ot]=_t}if(this.featuresRtree_&&this.featuresRtree_.load(C,J),this.hasListener(V.Z.ADDFEATURE)){lt=0;for(var Nt=F.length;lt<Nt;lt++)this.dispatchEvent(new p(V.Z.ADDFEATURE,F[lt]))}},X.prototype.bindFeaturesCollection_=function(P){var C=!1;this.addEventListener(V.Z.ADDFEATURE,function(F){C||(C=!0,P.push(F.feature),C=!1)}),this.addEventListener(V.Z.REMOVEFEATURE,function(F){C||(C=!0,P.remove(F.feature),C=!1)}),P.addEventListener(st.Z.ADD,function(F){C||(C=!0,this.addFeature(F.element),C=!1)}.bind(this)),P.addEventListener(st.Z.REMOVE,function(F){C||(C=!0,this.removeFeature(F.element),C=!1)}.bind(this)),this.featuresCollection_=P},X.prototype.clear=function(P){if(P){for(var C in this.featureChangeKeys_){this.featureChangeKeys_[C].forEach(D.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var J=function(_t){this.removeFeatureInternal(_t)}.bind(this);for(var lt in this.featuresRtree_.forEach(J),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[lt])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var nt=new p(V.Z.CLEAR);this.dispatchEvent(nt),this.changed()},X.prototype.forEachFeature=function(P){if(this.featuresRtree_)return this.featuresRtree_.forEach(P);this.featuresCollection_&&this.featuresCollection_.forEach(P)},X.prototype.forEachFeatureAtCoordinateDirect=function(P,C){var F=[P[0],P[1],P[0],P[1]];return this.forEachFeatureInExtent(F,function(J){if(J.getGeometry().intersectsCoordinate(P))return C(J)})},X.prototype.forEachFeatureInExtent=function(P,C){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(P,C);this.featuresCollection_&&this.featuresCollection_.forEach(C)},X.prototype.forEachFeatureIntersectingExtent=function(P,C){return this.forEachFeatureInExtent(P,function(F){if(F.getGeometry().intersectsExtent(P)){var lt=C(F);if(lt)return lt}})},X.prototype.getFeaturesCollection=function(){return this.featuresCollection_},X.prototype.getFeatures=function(){var P;return this.featuresCollection_?P=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(P=this.featuresRtree_.getAll(),(0,Y.xb)(this.nullGeometryFeatures_)||(0,m.l7)(P,(0,Y.KX)(this.nullGeometryFeatures_))),P},X.prototype.getFeaturesAtCoordinate=function(P){var C=[];return this.forEachFeatureAtCoordinateDirect(P,function(F){C.push(F)}),C},X.prototype.getFeaturesInExtent=function(P,C){var F=this;if(this.featuresRtree_){if(!(C&&C.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(P);var lt=(0,_.MV)(P,C);return[].concat.apply([],lt.map(function(nt){return F.featuresRtree_.getInExtent(nt)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},X.prototype.getClosestFeatureToCoordinate=function(P,C){var F=P[0],J=P[1],lt=null,nt=[NaN,NaN],_t=1/0,Ot=[-1/0,-1/0,1/0,1/0],Wt=C||q.uX;return this.featuresRtree_.forEachInExtent(Ot,function(Yt){if(Wt(Yt)){var te=Yt.getGeometry(),Nt=_t;if((_t=te.closestPointXY(F,J,nt,_t))<Nt){lt=Yt;var jt=Math.sqrt(_t);Ot[0]=F-jt,Ot[1]=J-jt,Ot[2]=F+jt,Ot[3]=J+jt}}}),lt},X.prototype.getExtent=function(P){return this.featuresRtree_.getExtent(P)},X.prototype.getFeatureById=function(P){var C=this.idIndex_[P.toString()];return void 0!==C?C:null},X.prototype.getFeatureByUid=function(P){var C=this.uidIndex_[P];return void 0!==C?C:null},X.prototype.getFormat=function(){return this.format_},X.prototype.getOverlaps=function(){return this.overlaps_},X.prototype.getUrl=function(){return this.url_},X.prototype.handleFeatureChange_=function(P){var C=P.target,F=(0,R.sq)(C),J=C.getGeometry();if(J){var lt=J.getExtent();F in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[F],this.featuresRtree_&&this.featuresRtree_.insert(lt,C)):this.featuresRtree_&&this.featuresRtree_.update(lt,C)}else F in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(C),this.nullGeometryFeatures_[F]=C);var nt=C.getId();if(void 0!==nt){var _t=nt.toString();this.idIndex_[_t]!==C&&(this.removeFromIdIndex_(C),this.idIndex_[_t]=C)}else this.removeFromIdIndex_(C),this.uidIndex_[F]=C;this.changed(),this.dispatchEvent(new p(V.Z.CHANGEFEATURE,C))},X.prototype.hasFeature=function(P){var C=P.getId();return void 0!==C?C in this.idIndex_:(0,R.sq)(P)in this.uidIndex_},X.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,Y.xb)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},X.prototype.loadFeatures=function(P,C,F){for(var J=this.loadedExtentsRtree_,lt=this.strategy_(P,C,F),nt=function(Yt,te){var Nt=lt[Yt];J.forEachInExtent(Nt,function(re){return(0,_.r4)(re.extent,Nt)})||(++_t.loadingExtentsCount_,_t.dispatchEvent(new p(V.Z.FEATURESLOADSTART)),_t.loader_.call(_t,Nt,C,F,function(re){--this.loadingExtentsCount_,this.dispatchEvent(new p(V.Z.FEATURESLOADEND,void 0,re))}.bind(_t),function(){--this.loadingExtentsCount_,this.dispatchEvent(new p(V.Z.FEATURESLOADERROR))}.bind(_t)),J.insert(Nt,{extent:Nt.slice()}))},_t=this,Ot=0,Wt=lt.length;Ot<Wt;++Ot)nt(Ot);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},X.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),z.prototype.refresh.call(this)},X.prototype.removeLoadedExtent=function(P){var F,C=this.loadedExtentsRtree_;C.forEachInExtent(P,function(J){if((0,_.fS)(J.extent,P))return F=J,!0}),F&&C.remove(F)},X.prototype.removeFeature=function(P){if(P){var C=(0,R.sq)(P);C in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[C]:this.featuresRtree_&&this.featuresRtree_.remove(P),this.removeFeatureInternal(P)&&this.changed()}},X.prototype.removeFeatureInternal=function(P){var C=(0,R.sq)(P),F=this.featureChangeKeys_[C];if(F){F.forEach(D.bN),delete this.featureChangeKeys_[C];var J=P.getId();return void 0!==J&&delete this.idIndex_[J.toString()],delete this.uidIndex_[C],this.dispatchEvent(new p(V.Z.REMOVEFEATURE,P)),P}},X.prototype.removeFromIdIndex_=function(P){var C=!1;for(var F in this.idIndex_)if(this.idIndex_[F]===P){delete this.idIndex_[F],C=!0;break}return C},X.prototype.setLoader=function(P){this.loader_=P},X.prototype.setUrl=function(P){(0,I.h)(this.format_,7),this.url_=P,this.setLoader(ht(P,this.format_))},X}(xt.Z);const tt=y},4412:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>gt});const gt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>it});var gt=E(2402),st=E(760),rt=E(119),at=E(9466);const it=function(){function xt(V){this.rbush_=new gt(V),this.items_={}}return xt.prototype.insert=function(V,q){var Q={minX:V[0],minY:V[1],maxX:V[2],maxY:V[3],value:q};this.rbush_.insert(Q),this.items_[(0,rt.sq)(q)]=Q},xt.prototype.load=function(V,q){for(var Q=new Array(q.length),U=0,Z=q.length;U<Z;U++){var k=V[U],I=q[U],_={minX:k[0],minY:k[1],maxX:k[2],maxY:k[3],value:I};Q[U]=_,this.items_[(0,rt.sq)(I)]=_}this.rbush_.load(Q)},xt.prototype.remove=function(V){var q=(0,rt.sq)(V),Q=this.items_[q];return delete this.items_[q],null!==this.rbush_.remove(Q)},xt.prototype.update=function(V,q){var Q=this.items_[(0,rt.sq)(q)],U=[Q.minX,Q.minY,Q.maxX,Q.maxY];(0,st.fS)(U,V)||(this.remove(q),this.insert(V,q))},xt.prototype.getAll=function(){return this.rbush_.all().map(function(q){return q.value})},xt.prototype.getInExtent=function(V){var q={minX:V[0],minY:V[1],maxX:V[2],maxY:V[3]};return this.rbush_.search(q).map(function(U){return U.value})},xt.prototype.forEach=function(V){return this.forEach_(this.getAll(),V)},xt.prototype.forEachInExtent=function(V,q){return this.forEach_(this.getInExtent(V),q)},xt.prototype.forEach_=function(V,q){for(var Q,U=0,Z=V.length;U<Z;U++)if(Q=q(V[U]))return Q;return Q},xt.prototype.isEmpty=function(){return(0,at.xb)(this.items_)},xt.prototype.clear=function(){this.rbush_.clear(),this.items_={}},xt.prototype.getExtent=function(V){var q=this.rbush_.toJSON();return(0,st.T9)(q.minX,q.minY,q.maxX,q.maxY,V)},xt.prototype.concat=function(V){for(var q in this.rbush_.load(V.rbush_.all()),V.items_)this.items_[q]=V.items_[q]},xt}()},5044:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>st});const st=function(){function rt(at){var et=at||{};this.color_=void 0!==et.color?et.color:null}return rt.prototype.clone=function(){var at=this.getColor();return new rt({color:Array.isArray(at)?at.slice():at||void 0})},rt.prototype.getColor=function(){return this.color_},rt.prototype.setColor=function(at){this.color_=at},rt}()},6398:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>at});var gt=E(119),st=E(1750);const at=function(){function et(it){this.opacity_=it.opacity,this.rotateWithView_=it.rotateWithView,this.rotation_=it.rotation,this.scale_=it.scale,this.scaleArray_=(0,st.Pq)(it.scale),this.displacement_=it.displacement,this.declutterMode_=it.declutterMode}return et.prototype.clone=function(){var it=this.getScale();return new et({opacity:this.getOpacity(),scale:Array.isArray(it)?it.slice():it,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},et.prototype.getOpacity=function(){return this.opacity_},et.prototype.getRotateWithView=function(){return this.rotateWithView_},et.prototype.getRotation=function(){return this.rotation_},et.prototype.getScale=function(){return this.scale_},et.prototype.getScaleArray=function(){return this.scaleArray_},et.prototype.getDisplacement=function(){return this.displacement_},et.prototype.getDeclutterMode=function(){return this.declutterMode_},et.prototype.getAnchor=function(){return(0,gt.O3)()},et.prototype.getImage=function(it){return(0,gt.O3)()},et.prototype.getHitDetectionImage=function(){return(0,gt.O3)()},et.prototype.getPixelRatio=function(it){return 1},et.prototype.getImageState=function(){return(0,gt.O3)()},et.prototype.getImageSize=function(){return(0,gt.O3)()},et.prototype.getOrigin=function(){return(0,gt.O3)()},et.prototype.getSize=function(){return(0,gt.O3)()},et.prototype.setDisplacement=function(it){this.displacement_=it},et.prototype.setOpacity=function(it){this.opacity_=it},et.prototype.setRotateWithView=function(it){this.rotateWithView_=it},et.prototype.setRotation=function(it){this.rotation_=it},et.prototype.setScale=function(it){this.scale_=it,this.scaleArray_=(0,st.Pq)(it)},et.prototype.listenImageChange=function(it){(0,gt.O3)()},et.prototype.load=function(){(0,gt.O3)()},et.prototype.unlistenImageChange=function(it){(0,gt.O3)()},et}()},6785:(Ut,wt,E)=>{"use strict";E.d(wt,{Z:()=>st});const st=function(){function rt(at){var et=at||{};this.color_=void 0!==et.color?et.color:null,this.lineCap_=et.lineCap,this.lineDash_=void 0!==et.lineDash?et.lineDash:null,this.lineDashOffset_=et.lineDashOffset,this.lineJoin_=et.lineJoin,this.miterLimit_=et.miterLimit,this.width_=et.width}return rt.prototype.clone=function(){var at=this.getColor();return new rt({color:Array.isArray(at)?at.slice():at||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},rt.prototype.getColor=function(){return this.color_},rt.prototype.getLineCap=function(){return this.lineCap_},rt.prototype.getLineDash=function(){return this.lineDash_},rt.prototype.getLineDashOffset=function(){return this.lineDashOffset_},rt.prototype.getLineJoin=function(){return this.lineJoin_},rt.prototype.getMiterLimit=function(){return this.miterLimit_},rt.prototype.getWidth=function(){return this.width_},rt.prototype.setColor=function(at){this.color_=at},rt.prototype.setLineCap=function(at){this.lineCap_=at},rt.prototype.setLineDash=function(at){this.lineDash_=at},rt.prototype.setLineDashOffset=function(at){this.lineDashOffset_=at},rt.prototype.setLineJoin=function(at){this.lineJoin_=at},rt.prototype.setMiterLimit=function(at){this.miterLimit_=at},rt.prototype.setWidth=function(at){this.width_=at},rt}()},5344:(Ut,wt,E)=>{"use strict";E.d(wt,{yF:()=>D,Ly:()=>T,ZP:()=>ht,J$:()=>R});var M,gt=E(521),st=E(6398),rt=E(3783),at=E(5813),et=E(1992),it=E(4686),xt=(M=function(O,p){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,tt){y.__proto__=tt}||function(y,tt){for(var z in tt)Object.prototype.hasOwnProperty.call(tt,z)&&(y[z]=tt[z])})(O,p)},function(O,p){if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function y(){this.constructor=O}M(O,p),O.prototype=null===p?Object.create(p):(y.prototype=p.prototype,new y)}),V=function(M){function O(p){var y=this,tt=void 0!==p.rotateWithView&&p.rotateWithView;return(y=M.call(this,{opacity:1,rotateWithView:tt,rotation:void 0!==p.rotation?p.rotation:0,scale:void 0!==p.scale?p.scale:1,displacement:void 0!==p.displacement?p.displacement:[0,0],declutterMode:p.declutterMode})||this).canvas_=void 0,y.hitDetectionCanvas_=null,y.fill_=void 0!==p.fill?p.fill:null,y.origin_=[0,0],y.points_=p.points,y.radius_=void 0!==p.radius?p.radius:p.radius1,y.radius2_=p.radius2,y.angle_=void 0!==p.angle?p.angle:0,y.stroke_=void 0!==p.stroke?p.stroke:null,y.size_=null,y.renderOptions_=null,y.render(),y}return xt(O,M),O.prototype.clone=function(){var p=this.getScale(),y=new O({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(p)?p.slice():p,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return y.setOpacity(this.getOpacity()),y},O.prototype.getAnchor=function(){var p=this.size_;if(!p)return null;var y=this.getDisplacement();return[p[0]/2-y[0],p[1]/2+y[1]]},O.prototype.getAngle=function(){return this.angle_},O.prototype.getFill=function(){return this.fill_},O.prototype.setFill=function(p){this.fill_=p,this.render()},O.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},O.prototype.getImage=function(p){var y=this.canvas_[p];if(!y){var tt=this.renderOptions_,z=(0,et.E4)(tt.size*p,tt.size*p);this.draw_(tt,z,p),y=z.canvas,this.canvas_[p]=y}return y},O.prototype.getPixelRatio=function(p){return p},O.prototype.getImageSize=function(){return this.size_},O.prototype.getImageState=function(){return gt.Z.LOADED},O.prototype.getOrigin=function(){return this.origin_},O.prototype.getPoints=function(){return this.points_},O.prototype.getRadius=function(){return this.radius_},O.prototype.getRadius2=function(){return this.radius2_},O.prototype.getSize=function(){return this.size_},O.prototype.getStroke=function(){return this.stroke_},O.prototype.setStroke=function(p){this.stroke_=p,this.render()},O.prototype.listenImageChange=function(p){},O.prototype.load=function(){},O.prototype.unlistenImageChange=function(p){},O.prototype.calculateLineJoinSize_=function(p,y,tt){if(0===y||this.points_===1/0||"bevel"!==p&&"miter"!==p)return y;var z=this.radius_,X=void 0===this.radius2_?z:this.radius2_;if(z<X){var P=z;z=X,X=P}var C=void 0===this.radius2_?this.points_:2*this.points_,F=2*Math.PI/C,J=X*Math.sin(F),nt=z-Math.sqrt(X*X-J*J),_t=Math.sqrt(J*J+nt*nt),Ot=_t/J;if("miter"===p&&Ot<=tt)return Ot*y;var Wt=y/2/Ot,Yt=y/2*(nt/_t),Nt=Math.sqrt((z+Wt)*(z+Wt)+Yt*Yt)-z;if(void 0===this.radius2_||"bevel"===p)return 2*Nt;var jt=z*Math.sin(F),fe=X-Math.sqrt(z*z-jt*jt),ve=Math.sqrt(jt*jt+fe*fe)/jt;if(ve<=tt){var kt=ve*y/2-X-z;return 2*Math.max(Nt,kt)}return 2*Nt},O.prototype.createRenderOptions=function(){var X,p=it.rc,y=0,tt=null,z=0,P=0;this.stroke_&&(null===(X=this.stroke_.getColor())&&(X=it.Tx),X=(0,at.y)(X),void 0===(P=this.stroke_.getWidth())&&(P=it.yC),tt=this.stroke_.getLineDash(),z=this.stroke_.getLineDashOffset(),void 0===(p=this.stroke_.getLineJoin())&&(p=it.rc),void 0===(y=this.stroke_.getMiterLimit())&&(y=it.V4));var C=this.calculateLineJoinSize_(p,P,y),F=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:X,strokeWidth:P,size:Math.ceil(2*F+C),lineDash:tt,lineDashOffset:z,lineJoin:p,miterLimit:y}},O.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var p=this.renderOptions_.size;this.canvas_={},this.size_=[p,p]},O.prototype.draw_=function(p,y,tt){if(y.scale(tt,tt),y.translate(p.size/2,p.size/2),this.createPath_(y),this.fill_){var z=this.fill_.getColor();null===z&&(z=it.bL),y.fillStyle=(0,at.y)(z),y.fill()}this.stroke_&&(y.strokeStyle=p.strokeStyle,y.lineWidth=p.strokeWidth,y.setLineDash&&p.lineDash&&(y.setLineDash(p.lineDash),y.lineDashOffset=p.lineDashOffset),y.lineJoin=p.lineJoin,y.miterLimit=p.miterLimit,y.stroke())},O.prototype.createHitDetectionCanvas_=function(p){if(this.fill_){var y=this.fill_.getColor(),tt=0;if("string"==typeof y&&(y=(0,rt._2)(y)),null===y?tt=1:Array.isArray(y)&&(tt=4===y.length?y[3]:1),0===tt){var z=(0,et.E4)(p.size,p.size);this.hitDetectionCanvas_=z.canvas,this.drawHitDetectionCanvas_(p,z)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},O.prototype.createPath_=function(p){var y=this.points_,tt=this.radius_;if(y===1/0)p.arc(0,0,tt,0,2*Math.PI);else{var z=void 0===this.radius2_?tt:this.radius2_;void 0!==this.radius2_&&(y*=2);for(var X=this.angle_-Math.PI/2,P=2*Math.PI/y,C=0;C<y;C++){var F=X+C*P,J=C%2==0?tt:z;p.lineTo(J*Math.cos(F),J*Math.sin(F))}p.closePath()}},O.prototype.drawHitDetectionCanvas_=function(p,y){y.translate(p.size/2,p.size/2),this.createPath_(y),y.fillStyle=it.bL,y.fill(),this.stroke_&&(y.strokeStyle=p.strokeStyle,y.lineWidth=p.strokeWidth,p.lineDash&&(y.setLineDash(p.lineDash),y.lineDashOffset=p.lineDashOffset),y.lineJoin=p.lineJoin,y.miterLimit=p.miterLimit,y.stroke())},O}(st.Z);const q=V;var Q=function(){var M=function(O,p){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,tt){y.__proto__=tt}||function(y,tt){for(var z in tt)Object.prototype.hasOwnProperty.call(tt,z)&&(y[z]=tt[z])})(O,p)};return function(O,p){if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function y(){this.constructor=O}M(O,p),O.prototype=null===p?Object.create(p):(y.prototype=p.prototype,new y)}}(),U=function(M){function O(p){var y=p||{};return M.call(this,{points:1/0,fill:y.fill,radius:y.radius,stroke:y.stroke,scale:void 0!==y.scale?y.scale:1,rotation:void 0!==y.rotation?y.rotation:0,rotateWithView:void 0!==y.rotateWithView&&y.rotateWithView,displacement:void 0!==y.displacement?y.displacement:[0,0],declutterMode:y.declutterMode})||this}return Q(O,M),O.prototype.clone=function(){var p=this.getScale(),y=new O({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(p)?p.slice():p,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return y.setOpacity(this.getOpacity()),y},O.prototype.setRadius=function(p){this.radius_=p,this.render()},O}(q);const Z=U;var k=E(5044),I=E(6785),_=E(1911),m=function(){function M(O){var p=O||{};this.geometry_=null,this.geometryFunction_=K,void 0!==p.geometry&&this.setGeometry(p.geometry),this.fill_=void 0!==p.fill?p.fill:null,this.image_=void 0!==p.image?p.image:null,this.renderer_=void 0!==p.renderer?p.renderer:null,this.hitDetectionRenderer_=void 0!==p.hitDetectionRenderer?p.hitDetectionRenderer:null,this.stroke_=void 0!==p.stroke?p.stroke:null,this.text_=void 0!==p.text?p.text:null,this.zIndex_=p.zIndex}return M.prototype.clone=function(){var O=this.getGeometry();return O&&"object"==typeof O&&(O=O.clone()),new M({geometry:O,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},M.prototype.getRenderer=function(){return this.renderer_},M.prototype.setRenderer=function(O){this.renderer_=O},M.prototype.setHitDetectionRenderer=function(O){this.hitDetectionRenderer_=O},M.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},M.prototype.getGeometry=function(){return this.geometry_},M.prototype.getGeometryFunction=function(){return this.geometryFunction_},M.prototype.getFill=function(){return this.fill_},M.prototype.setFill=function(O){this.fill_=O},M.prototype.getImage=function(){return this.image_},M.prototype.setImage=function(O){this.image_=O},M.prototype.getStroke=function(){return this.stroke_},M.prototype.setStroke=function(O){this.stroke_=O},M.prototype.getText=function(){return this.text_},M.prototype.setText=function(O){this.text_=O},M.prototype.getZIndex=function(){return this.zIndex_},M.prototype.setGeometry=function(O){"function"==typeof O?this.geometryFunction_=O:"string"==typeof O?this.geometryFunction_=function(p){return p.get(O)}:O?void 0!==O&&(this.geometryFunction_=function(){return O}):this.geometryFunction_=K,this.geometry_=O},M.prototype.setZIndex=function(O){this.zIndex_=O},M}();function R(M){var O;if("function"==typeof M)O=M;else{var p;if(Array.isArray(M))p=M;else(0,_.h)("function"==typeof M.getZIndex,41),p=[M];O=function(){return p}}return O}var Y=null;function D(M,O){if(!Y){var p=new k.Z({color:"rgba(255,255,255,0.4)"}),y=new I.Z({color:"#3399CC",width:1.25});Y=[new m({image:new Z({fill:p,stroke:y,radius:5}),fill:p,stroke:y})]}return Y}function T(){var M={},O=[255,255,255,1],p=[0,153,255,1];return M.Polygon=[new m({fill:new k.Z({color:[255,255,255,.5]})})],M.MultiPolygon=M.Polygon,M.LineString=[new m({stroke:new I.Z({color:O,width:5})}),new m({stroke:new I.Z({color:p,width:3})})],M.MultiLineString=M.LineString,M.Circle=M.Polygon.concat(M.LineString),M.Point=[new m({image:new Z({radius:6,fill:new k.Z({color:p}),stroke:new I.Z({color:O,width:1.5})}),zIndex:1/0})],M.MultiPoint=M.Point,M.GeometryCollection=M.Polygon.concat(M.LineString,M.Point),M}function K(M){return M.getGeometry()}const ht=m}}]);